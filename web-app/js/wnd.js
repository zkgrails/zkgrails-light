zk.load('zul.wgt',function(){zk._n='zul.wnd';try{zk._p=zk.$package(zk._n,false,true);
zul.wnd.Window=zk.$extends(zul.Widget,{_mode:"embedded",_border:"none",_minheight:100,_minwidth:200,_shadow:true,$init:function(){if(!zk.light){this._fellows={}}this.$supers("$init",arguments);this.listen({onClose:this,onMove:this,onSize:this.onSizeEvent,onZIndex:this},-1000);this._skipper=new zul.wnd.Skipper(this)},$define:{mode:_zkf=function(){this._updateDomOuter()},title:_zkf,border:_zkf,closable:_zkf,sizable:function(a){if(this.desktop){if(a){this._makeSizer()}else{if(this._sizer){this._sizer.destroy();this._sizer=null}}}},maximizable:_zkf,minimizable:_zkf,maximized:function(c,k){var n=this.$n();if(n){var r=zk(n),v=this.isRealVisible();if(!v&&c){return}var o,i,g,q,j=n.style,b=this.getZclass();if(c){jq(this.$n("max")).addClass(b+"-maxd");this._hideShadow();var a=this._mode!="embedded",e=a?jq(n).offsetParent():jq(n).parent();o=j.left;i=j.top;g=j.width;q=j.height;j.top="-10000px";j.left="-10000px";var m=zk.ie6_&&e[0].clientWidth==0?e[0].offsetWidth-e.zk.borderWidth():e[0].clientWidth,u=zk.ie6_&&e[0].clientHeight==0?e[0].offsetHeight-e.zk.borderHeight():e[0].clientHeight;if(!a){m-=e.zk.paddingWidth();m=r.revisedWidth(m);u-=e.zk.paddingHeight();u=r.revisedHeight(u)}j.width=jq.px(m);j.height=jq.px(u);this._lastSize={l:o,t:i,w:g,h:q};j.top="0";j.left="0"}else{var p=this.$n("max"),d=jq(p);d.removeClass(b+"-maxd").removeClass(b+"-maxd-over");if(this._lastSize){j.left=this._lastSize.l;j.top=this._lastSize.t;j.width=this._lastSize.w;j.height=this._lastSize.h;this._lastSize=null}o=j.left;i=j.top;g=j.width;q=j.height;var f=this.$n("cave");if(f){f.style.width=f.style.height=""}}if(!k||v){this._visible=true;this._syncMask();this.fire("onMaximize",{left:o,top:i,width:g,height:q,maximized:c,fromServer:k})}if(v){this.__maximized=true;zWatch.fireDown("beforeSize",this);zWatch.fireDown("onSize",this)}}},minimized:function(d,c){if(this.isMaximized()){this.setMaximized(false)}var i=this.$n();if(i){var g=i.style,b=g.left,e=g.top,a=g.width,f=g.height;if(d){zWatch.fireDown("onHide",this);jq(i).hide()}else{jq(i).show();zWatch.fireDown("onShow",this)}if(!c){this._visible=false;this._syncShadow();this._syncMask();this.fire("onMinimize",{left:g.left,top:g.top,width:g.width,height:g.height,minimized:d})}}},contentStyle:_zkf,contentSclass:_zkf,position:function(a){if(this.desktop&&this._mode!="embedded"){this._updateDomPos()}},minheight:null,minwidth:null,shadow:function(){if(this._shadow){this._syncShadow()}else{if(this._shadowWgt){this._shadowWgt.destroy();this._shadowWgt=null}}}},doOverlapped:function(){this.setMode("overlapped")},doPopup:function(){this.setMode("popup")},doHighlighted:function(){this.setMode("highlighted")},doModal:function(){this.setMode("modal")},doEmbedded:function(){this.setMode("embedded")},_doOverlapped:function(){var d=this.getPosition(),c=this.$n(),a=zk(c);if(!d&&!c.style.top&&!c.style.left){var b=a.revisedOffset();c.style.left=jq.px(b[0],true);c.style.top=jq.px(b[1],true)}else{if(d=="parent"){this._posByParent()}}a.makeVParent();this._syncShadow();this._updateDomPos();if(this.isRealVisible()){a.cleanVisibility()}this.setTopmost();this._makeFloat()},_doModal:function(){var h=this.getPosition(),g=this.$n(),b=zk(g);if(h=="parent"){this._posByParent()}b.makeVParent();this._syncShadow();this._updateDomPos(true);if(!h){var d=zk.parseInt(g.style.top),f=jq.innerY();if(f){var a=d-f;if(a>100){g.style.top=jq.px(d-(a-100))}}else{if(d>100){g.style.top="100px"}}}var e=this.isRealVisible();if(e){b.cleanVisibility()}this.setTopmost();this._mask=new zk.eff.FullMask({id:this.uuid+"-mask",anchor:this._shadowWgt?this._shadowWgt.getBottomElement():this.$n(),zIndex:this._zIndex,stackup:(zk.useStackup===undefined?zk.ie6_:zk.useStackup),visible:e});if(e){this._prevmodal=zk.currentModal;zk.currentModal=this;this._prevfocus=zk.currentFocus;var c=this;setTimeout(function(){if(!zUtl.isAncestor(c,zk.currentFocus)){c.focus()}},0)}this._makeFloat()},_posByParent:function(){var d=this.$n(),a=zk(d.parentNode).revisedOffset(),c=zk.parseInt(d.style.left),b=zk.parseInt(d.style.top);this._offset=a;d.style.left=jq.px(a[0]+zk.parseInt(d.style.left),true);d.style.top=jq.px(a[1]+zk.parseInt(d.style.top),true)},_syncShadow:_zkf=function(){if(this._mode=="embedded"){if(this._shadowWgt){this._shadowWgt.destroy();this._shadowWgt=null}}else{if(this._shadow){if(!this._shadowWgt){this._shadowWgt=new zk.eff.Shadow(this.$n(),{left:-4,right:4,top:-2,bottom:3,stackup:true})}if(this.isMaximized()||this.isMinimized()){this._hideShadow()}else{this._shadowWgt.sync()}}}},zsync:_zkf,_syncMask:function(){if(this._mask&&this._shadowWgt){this._mask.sync(this._shadowWgt.getBottomElement())}},_hideShadow:function(){var a=this._shadowWgt;if(a){a.hide()}},_makeSizer:function(){if(!this._sizer){var a=this.$class;this._sizer=new zk.Draggable(this,null,{stackup:true,draw:a._drawsizing,starteffect:a._startsizing,ghosting:a._ghostsizing,endghosting:a._endghostsizing,ignoredrag:a._ignoresizing,endeffect:a._aftersizing})}},_makeFloat:function(){var b=this.$n("cap");if(b&&!this._drag){b.style.cursor="move";var a=this.$class;this._drag=new zk.Draggable(this,null,{handle:b,stackup:true,starteffect:a._startmove,ghosting:a._ghostmove,endghosting:a._endghostmove,ignoredrag:a._ignoremove,endeffect:a._aftermove})}},_updateDomPos:function(c){var d=this.$n(),h=this._position;if(h=="parent"||(!h&&!c)){return}var j=d.style;j.position="absolute";var g=j.left,f=j.top;zk(d).center(h);var b=this._shadowWgt;if(h&&b){var a=b.opts,e=d.offsetLeft,i=d.offsetTop;if(h.indexOf("left")>=0&&a.left<0){j.left=jq.px(e-a.left,true)}else{if(h.indexOf("right")>=0&&a.right>0){j.left=jq.px(e-a.right,true)}}if(h.indexOf("top")>=0&&a.top<0){j.top=jq.px(i-a.top,true)}else{if(h.indexOf("bottom")>=0&&a.bottom>0){j.top=jq.px(i-a.bottom,true)}}}this._syncShadow();if(g!=j.left||f!=j.top){this._fireOnMove()}},_updateDomOuter:function(){this.rerender(this._skipper)},onClose:function(){if(!this.inServer){this.parent.removeChild(this)}},onMove:function(a){this._left=a.left;this._top=a.top},onSizeEvent:function(a){var e=a.data,d=this.$n(),c=d.style;this._hideShadow();if(e.width!=c.width){c.width=e.width;this._fixWdh()}if(e.height!=c.height){c.height=e.height;this._fixHgh()}if(e.left!=c.left||e.top!=c.top){c.left=e.left;c.top=e.top;this._fireOnMove(a.keys)}this._syncShadow();var b=this;setTimeout(function(){zWatch.fireDown("beforeSize",b);zWatch.fireDown("onSize",b)},zk.ie6_?800:0)},onZIndex:function(a){this._syncShadow();this._syncMask()},onShow:function(b){var a=b.origin;if(this!=a&&this._mode!="embedded"&&this.isRealVisible({until:a,dom:true})){zk(this.$n()).cleanVisibility();this._syncShadow()}this.onSize(a)},onHide:function(b){var a=b.origin;if(this!=a&&this._mode!="embedded"&&this.isRealVisible({until:a,dom:true})){this.$n().style.visibility="hidden";this._syncShadow()}},onSize:(function(){function a(h){if(!h._lastSize){return}var e=h.$n(),f=h._mode!="embedded",g=f?jq(e).offsetParent():jq(e).parent(),d=e.style;var b=zk.ie6_&&g[0].clientWidth==0?g[0].offsetWidth-g.zk.borderWidth():g[0].clientWidth,c=zk.ie6_&&g[0].clientHeight==0?g[0].offsetHeight-g.zk.borderHeight():g[0].clientHeight;if(!f){b-=g.zk.paddingWidth();b=g.zk.revisedWidth(b);c-=g.zk.paddingHeight();c=g.zk.revisedHeight(c)}d.width=jq.px(b);d.height=jq.px(c)}return function(){this._hideShadow();if(this.isMaximized()){if(!this.__maximized){a(this)}this.__maximized=false}this._fixHgh();this._fixWdh();if(this._mode!="embedded"){this._updateDomPos();this._syncShadow()}}})(),onFloatUp:function(a){if(!this.isVisible()||this._mode=="embedded"){return}var c=a.origin;if(this._mode=="popup"){for(var b;c;c=c.parent){if(c==this){if(!b){this.setTopmost()}return}b=b||c.isFloating_()}this.setVisible(false);this.fire("onOpen",{open:false})}else{for(;c;c=c.parent){if(c==this){this.setTopmost();return}if(c.isFloating_()){return}}}},_fixWdh:zk.ie7?function(){if(this._mode!="embedded"&&this._mode!="popup"&&this.isRealVisible()){var c=this.$n(),i=this.$n("cave").parentNode,e=c.style.width,f=jq(c),g=f.find(">div:first"),j=g[0],a=j&&this.$n("cap")?g.nextAll("div:first")[0]:null,d=f.find(">div:last")[0];if(!e||e=="auto"){var b=zk(i.parentNode),h=b.padBorderWidth()+zk(i.parentNode.parentNode).padBorderWidth();if(j){j.firstChild.style.width=jq.px(i.offsetWidth+h)}if(a){a.firstChild.firstChild.style.width=jq.px(i.offsetWidth-(zk(a).padBorderWidth()+zk(a.firstChild).padBorderWidth()-h))}if(d){d.firstChild.style.width=jq.px(i.offsetWidth+h)}}else{if(j){j.firstChild.style.width=""}if(a){a.firstChild.style.width=""}if(d){d.firstChild.style.width=""}}}}:zk.$void,_fixHgh:function(){if(this.isRealVisible()){var d=this.$n(),a=d.style.height,c=this.$n("cave"),b=c.style.height;if(a&&a!="auto"){if(zk.ie6_){c.style.height="0px"}zk(c).setOffsetHeight(this._offsetHeight(d))}else{if(b&&b!="auto"){if(zk.ie6_){c.style.height="0px"}c.style.height=""}}}},_offsetHeight:function(e){var b=e.offsetHeight-this._titleHeight(e);if(this._mode!="embedded"&&this._mode!="popup"){var d=this.$n("cave"),c=jq(e).find(">div:last")[0],a=this.$n("cap");b-=c.offsetHeight;if(d){b-=zk(d.parentNode).padBorderHeight()}if(a){b-=zk(a.parentNode).padBorderHeight()}}return b-zk(e).padBorderHeight()},_titleHeight:function(d){var c=this.$n("cap"),a=jq(d).find(">div:first"),b=a[0];return c?c.offsetHeight+b.offsetHeight:this._mode!="embedded"&&this._mode!="popup"?b.offsetHeight:0},_fireOnMove:function(d){var g=this._position,c=this.$n(),a=zk.parseInt(c.style.left),f=zk.parseInt(c.style.top);if(g=="parent"){var b=zk(c).vparentNode();if(b){var e=zk(b).revisedOffset();a-=e[0];f-=e[1]}}this.fire("onMove",zk.copy({left:a+"px",top:f+"px"},d),{ignorable:true})},setVisible:function(a){if(this._visible!=a){if(this.isMaximized()){this.setMaximized(false)}else{if(this.isMinimized()){this.setMinimized(false)}}this.$supers("setVisible",arguments)}},setHeight:function(a){this.$supers("setHeight",arguments);if(this.desktop){this._fixHgh();this._syncShadow();zWatch.fireDown("beforeSize",this);zWatch.fireDown("onSize",this)}},setWidth:function(a){this.$supers("setWidth",arguments);if(this.desktop){this._fixWdh();this._syncShadow();zWatch.fireDown("beforeSize",this);zWatch.fireDown("onSize",this)}},setTop:function(){this._hideShadow();this.$supers("setTop",arguments);this._syncShadow()},setLeft:function(){this._hideShadow();this.$supers("setLeft",arguments);this._syncShadow()},setDomVisible_:function(){this.$supers("setDomVisible_",arguments);this._syncShadow();this._syncMask()},setZIndex:_zkf=function(){this.$supers("setZIndex",arguments);this._syncShadow();this._syncMask()},setZindex:_zkf,focus:function(c){if(this.desktop&&this.isVisible()&&this.canActivate({checkOnly:true})){var b=this.caption;for(var a=this.firstChild;a;a=a.nextSibling){if(a!=b&&a.focus(c)){return true}}return b&&b.focus(c)}return false},getZclass:function(){var a=this._zclass;return a!=null?a:"z-window-"+this._mode},onChildAdded_:function(a){this.$supers("onChildAdded_",arguments);if(a.$instanceof(zul.wgt.Caption)){this.caption=a}},onChildRemoved_:function(a){this.$supers("onChildRemoved_",arguments);if(a==this.caption){this.caption=null}},domStyle_:function(b){var a=this.$supers("domStyle_",arguments);if((!b||!b.visible)&&this.isMinimized()){a="display:none;"+a}if(this._mode!="embedded"){a="position:absolute;visibility:hidden;"+a}return a},bind_:function(e,d,c){this.$supers("bind_",arguments);var b=this._mode;zWatch.listen({onSize:this,onShow:this});if(b!="embedded"){zWatch.listen({onFloatUp:this,onHide:this});this.setFloating_(true);if(b=="modal"||b=="highlighted"){this._doModal()}else{this._doOverlapped()}}if(this._sizable){this._makeSizer()}this.domListen_(this.$n(),"onMouseOver");if(this.isMaximizable()&&this.isMaximized()){var a=this;c.push(function(){a._maximized=false;a.setMaximized(true,true)})}if(this._mode!="embedded"&&(zk.ie||zk.opera||zk.gecko2_)){jq.zsync(this)}},unbind_:function(){var e=this.$n();e.style.visibility="hidden";if(zk.ie||zk.opera||zk.gecko2_){jq.zsync(this,false)}if(this._shadowWgt){this._shadowWgt.destroy();this._shadowWgt=null}if(this._drag){this._drag.destroy();this._drag=null}if(this._sizer){this._sizer.destroy();this._sizer=null}if(this._mask){this._mask.destroy();this._mask=null}zk(e).undoVParent();zWatch.unlisten({onFloatUp:this,onSize:this,onShow:this,onHide:this});this.setFloating_(false);if(zk.currentModal==this){zk.currentModal=this._prevmodal;var f=this._prevfocus;if(f){f.focus(0)}this._prevfocus=this._prevmodal=null}var d=this.$class;for(var c=["close","max","min"],b=3;b--;){var a=c[b],g=this["e"+a];if(g){this["e"+a]=null;jq(g).unbind("click",d[a+"click"]).unbind("mouseover",d[a+"over"]).unbind("mouseout",d[a+"out"])}}this.$supers("unbind_",arguments)},_doMouseOver:function(a){if(this._sizer){var e=this.$n(),d=this.$class._insizer(e,zk(e).revisedOffset(),a.pageX,a.pageY),b=this._mode=="embedded"?false:this.$n("cap");if(!this.isMaximized()&&d){if(this.isMaximized()){return}if(this._backupCursor==undefined){this._backupCursor=e.style.cursor}e.style.cursor=d==1?"n-resize":d==2?"ne-resize":d==3?"e-resize":d==4?"se-resize":d==5?"s-resize":d==6?"sw-resize":d==7?"w-resize":"nw-resize";if(b){b.style.cursor=""}}else{e.style.cursor=this._backupCursor;if(b){b.style.cursor="move"}}}},doClick_:function(a){switch(a.domTarget){case this.$n("close"):this.fire("onClose");break;case this.$n("max"):this.setMaximized(!this.isMaximized());break;case this.$n("min"):this.setMinimized(!this.isMinimized());break;default:this.$supers("doClick_",arguments);return}a.stop()},doMouseOver_:function(a){switch(a.domTarget){case this.$n("close"):jq(this.$n("close")).addClass(this.getZclass()+"-close-over");break;case this.$n("max"):var c=this.getZclass(),b=this.isMaximized()?" "+c+"-maxd-over":"";jq(this.$n("max")).addClass(c+"-max-over"+b);break;case this.$n("min"):jq(this.$n("min")).addClass(this.getZclass()+"-min-over");break}this.$supers("doMouseOver_",arguments)},doMouseOut_:function(a){switch(a.domTarget){case this.$n("close"):jq(this.$n("close")).removeClass(this.getZclass()+"-close-over");break;case this.$n("max"):var c=this.getZclass(),b=jq(this.$n("max"));if(this.isMaximized()){b.removeClass(c+"-maxd-over")}b.removeClass(c+"-max-over");break;case this.$n("min"):jq(this.$n("min")).removeClass(this.getZclass()+"-min-over");break}this.$supers("doMouseOut_",arguments)}},{_startmove:function(b){var a=b.node;if(a.style.top&&a.style.top.indexOf("%")>=0){a.style.top=a.offsetTop+"px"}if(a.style.left&&a.style.left.indexOf("%")>=0){a.style.left=a.offsetLeft+"px"}zWatch.fire("onFloatUp",b.control)},_ghostmove:function(i,g,l){var b=i.control,a=i.node;b._hideShadow();var m=jq(a),d=m.find(">div:first"),j=d[0],f=d.nextAll("div:first")[0],c=jq(j).clone()[0],k=jq(f).clone()[0];jq(document.body).prepend('<div id="zk_wndghost" class="'+b.getZclass()+'-move-ghost" style="position:absolute;top:'+g[1]+"px;left:"+g[0]+"px;width:"+m.zk.offsetWidth()+"px;height:"+m.zk.offsetHeight()+"px;z-index:"+a.style.zIndex+'"><dl></dl></div>');i._wndoffs=g;a.style.visibility="hidden";var e=a.offsetHeight-j.offsetHeight-f.offsetHeight;a=jq("#zk_wndghost")[0];a.firstChild.style.height=jq.px(zk(a.firstChild).revisedHeight(e));a.insertBefore(c,a.firstChild);a.insertBefore(k,a.lastChild);return a},_endghostmove:function(c,a){var b=c.node;a.style.top=jq.px(a.offsetTop+b.offsetTop-c._wndoffs[1],true);a.style.left=jq.px(a.offsetLeft+b.offsetLeft-c._wndoffs[0],true);document.body.style.cursor=""},_ignoremove:function(c,e,a){var b=c.node,d=c.control;switch(a.domTarget){case d.$n("close"):case d.$n("max"):case d.$n("min"):return true}if(!d.isSizable()||(b.offsetTop+4<e[1]&&b.offsetLeft+4<e[0]&&b.offsetLeft+b.offsetWidth-4>e[0])){return false}return true},_aftermove:function(b,a){b.node.style.visibility="";var c=b.control;c._syncShadow();c._fireOnMove(a.data)},_startsizing:function(a){zWatch.fire("onFloatUp",a.control)},_ghostsizing:function(f,e,a){var d=f.control,c=f.node;d._hideShadow();d.setTopmost();var b=jq(c);jq(document.body).append('<div id="zk_ddghost" class="'+d.getZclass()+'-resize-faker" style="position:absolute;top:'+e[1]+"px;left:"+e[0]+"px;width:"+b.zk.offsetWidth()+"px;height:"+b.zk.offsetHeight()+"px;z-index:"+c.style.zIndex+'"><dl></dl></div>');return jq("#zk_ddghost")[0]},_endghostsizing:function(c,a){var b=c.node;if(a){c.z_szofs={top:b.offsetTop+"px",left:b.offsetLeft+"px",height:zk(b).revisedHeight(b.offsetHeight)+"px",width:zk(b).revisedWidth(b.offsetWidth)+"px"}}},_insizer:function(e,f,c,g){var d=f[0]+e.offsetWidth,a=f[1]+e.offsetHeight;if(c-f[0]<=5){if(g-f[1]<=5){return 8}else{if(a-g<=5){return 6}else{return 7}}}else{if(d-c<=5){if(g-f[1]<=5){return 2}else{if(a-g<=5){return 4}else{return 3}}}else{if(g-f[1]<=5){return 1}else{if(a-g<=5){return 5}}}}},_ignoresizing:function(e,g,a){var c=e.node,f=e.control;if(f.isMaximized()){return true}var d=zk(c).revisedOffset(),b=f.$class._insizer(c,d,g[0],g[1]);if(b){f._hideShadow();e.z_dir=b;e.z_box={top:d[1],left:d[0],height:c.offsetHeight,width:c.offsetWidth,minHeight:zk.parseInt(f.getMinheight()),minWidth:zk.parseInt(f.getMinwidth())};e.z_orgzi=c.style.zIndex;return false}return true},_aftersizing:function(c,a){var d=c.control,b=c.z_szofs;d.fire("onSize",zk.copy(b,a.keys),{ignorable:true});c.z_szofs=null},_drawsizing:function(d,e,b){if(d.z_dir==8||d.z_dir<=2){var c=d.z_box.height+d.z_box.top-e[1];if(c<d.z_box.minHeight){e[1]=d.z_box.height+d.z_box.top-d.z_box.minHeight;c=d.z_box.minHeight}d.node.style.height=jq.px(c);d.node.style.top=e[1]+"px"}if(d.z_dir>=4&&d.z_dir<=6){var c=d.z_box.height+e[1]-d.z_box.top;if(c<d.z_box.minHeight){c=d.z_box.minHeight}d.node.style.height=jq.px(c)}if(d.z_dir>=6&&d.z_dir<=8){var a=d.z_box.width+d.z_box.left-e[0];if(a<d.z_box.minWidth){e[0]=d.z_box.width+d.z_box.left-d.z_box.minWidth;a=d.z_box.minWidth}d.node.style.width=jq.px(a);d.node.style.left=e[0]+"px"}if(d.z_dir>=2&&d.z_dir<=4){var a=d.z_box.width+e[0]-d.z_box.left;if(a<d.z_box.minWidth){a=d.z_box.minWidth}d.node.style.width=jq.px(a)}}});zul.wnd.Skipper=zk.$extends(zk.Skipper,{$init:function(a){this._w=a},restore:function(){this.$supers("restore",arguments);var a=this._w;if(a._mode!="embedded"){a._updateDomPos();a._syncShadow()}}});
zkreg('zul.wnd.Window',true);zk._m={};
zk._m['default']=function(c,k){var b=this.getZclass(),a=this.uuid,h=this.getTitle(),j=this.caption,l=this.getContentStyle(),e=this.getContentSclass(),f=this.getMode(),d="embedded"!=f&&"popup"!=f,g="normal"!=this.getBorder()?"-noborder":"";c.push("<div",this.domAttrs_(),">");if(j||h){c.push('<div class="',b,'-tl"><div class="',b,'-tr"></div></div><div class="',b,'-hl"><div class="',b,'-hr"><div class="',b,'-hm"><div id="',a,'-cap" class="',b,'-header">');if(j){j.redraw(c)}else{if(this.isClosable()){c.push('<div id="',a,'-close" class="',b,"-icon ",b,'-close"></div>')}if(this.isMaximizable()){c.push('<div id="',a,'-max" class="',b,"-icon ",b,"-max");if(this.isMaximized()){c.push(" ",b,"-maxd")}c.push('"></div>')}if(this.isMinimizable()){c.push('<div id="'+a,'-min" class="',b,"-icon ",b,'-min"></div>')}c.push(zUtl.encodeXML(h))}c.push("</div></div></div></div>")}else{if(d){c.push('<div class="',b,"-tl",g,'"><div class="',b,"-tr",g,'"></div></div>')}}if(d){c.push('<div class="',b,"-cl",g,'"><div class="',b,"-cr",g,'"><div class="',b,"-cm",g,'">')}c.push('<div id="',a,'-cave" class="');if(e){c.push(e," ")}c.push(b,"-cnt",g,'"');if(l){c.push(' style="',l,'"')}c.push(">");if(!k){for(var i=this.firstChild;i;i=i.nextSibling){if(i!=j){i.redraw(c)}}}c.push("</div>");if(d){c.push('</div></div></div><div class="',b,"-bl",g,'"><div class="',b,"-br",g,'"></div></div>')}c.push("</div>")};
;zkmld(zk._p.Window,zk._m);zul.wnd.Panel=zk.$extends(zul.Widget,{_border:"none",_title:"",_open:true,$init:function(){this.$supers("$init",arguments);this.listen({onClose:this,onMove:this},-1000)},$define:{framable:_zkf=function(){this.rerender()},movable:_zkf,floatable:_zkf,maximizable:_zkf,minimizable:_zkf,collapsible:_zkf,closable:_zkf,border:_zkf,title:_zkf,open:function(b,a){var c=this.$n();if(c){var e=this.getZclass(),d=jq(this.$n("body"));if(d[0]&&!d.is(":animated")){if(b){jq(c).removeClass(e+"-colpsd");d.zk.slideDown(this,{afterAnima:this._afterSlideDown})}else{jq(c).addClass(e+"-colpsd");this._hideShadow();if(zk.ie6_&&!c.style.width){c.runtimeStyle.width="100%"}d.zk.slideUp(this,{beforeAnima:this._beforeSlideUp})}if(!a){this.fire("onOpen",{open:b})}}}},maximized:function(c,k){var n=this.$n();if(n){var r=zk(n),v=r.isRealVisible();if(!v&&c){return}var o,i,f,q,j=n.style,b=this.getZclass();if(c){jq(this.$n("max")).addClass(b+"-maxd");this._hideShadow();if(this.isCollapsible()&&!this.isOpen()){r.jq.removeClass(b+"-colpsd");var g=this.$n("body");if(g){g.style.display=""}}var a=this.isFloatable(),e=a?jq(n).offsetParent():jq(n).parent();o=j.left;i=j.top;f=j.width;q=j.height;j.top="-10000px";j.left="-10000px";var m=zk.ie6_&&e[0].clientWidth==0?e[0].offsetWidth-e.zk.borderWidth():e[0].clientWidth,u=zk.ie6_&&e[0].clientHeight==0?e[0].offsetHeight-e.zk.borderHeight():e[0].clientHeight;if(!a){m-=e.zk.paddingWidth();m=r.revisedWidth(m);u-=e.zk.paddingHeight();u=r.revisedHeight(u)}j.width=jq.px(m);j.height=jq.px(u);this._lastSize={l:o,t:i,w:f,h:q};j.top="0";j.left="0"}else{var p=this.$n("max"),d=jq(p);d.removeClass(b+"-maxd").removeClass(b+"-maxd-over");if(this._lastSize){j.left=this._lastSize.l;j.top=this._lastSize.t;j.width=this._lastSize.w;j.height=this._lastSize.h;this._lastSize=null}o=j.left;i=j.top;f=j.width;q=j.height;if(this.isCollapsible()&&!this.isOpen()){jq(n).addClass(b+"-colpsd");var g=this.$n("body");if(g){g.style.display="none"}}var g=this.panelchildren?this.panelchildren.$n():null;if(g){g.style.width=g.style.height=""}}if(!k||v){this._visible=true;this.fire("onMaximize",{left:o,top:i,width:f,height:q,maximized:c,fromServer:k})}if(v){this.__maximized=true;zWatch.fireDown("beforeSize",this);zWatch.fireDown("onSize",this)}}},minimized:function(d,c){if(this.isMaximized()){this.setMaximized(false)}var i=this.$n();if(i){var g=i.style,b=g.left,e=g.top,a=g.width,f=g.height;if(d){zWatch.fireDown("onHide",this);jq(i).hide()}else{jq(i).show();zWatch.fireDown("onShow",this)}if(!c){this._visible=false;this.fire("onMinimize",{left:g.left,top:g.top,width:g.width,height:g.height,minimized:d})}}}},setVisible:function(a){if(this._visible!=a){if(this.isMaximized()){this.setMaximized(false)}else{if(this.isMinimized()){this.setMinimized(false)}}this.$supers("setVisible",arguments)}},setHeight:function(){this.$supers("setHeight",arguments);if(this.desktop){zWatch.fireDown("beforeSize",this);zWatch.fireDown("onSize",this)}},setWidth:function(){this.$supers("setWidth",arguments);if(this.desktop){zWatch.fireDown("beforeSize",this);zWatch.fireDown("onSize",this)}},setTop:function(){this._hideShadow();this.$supers("setTop",arguments);this._syncShadow()},setLeft:function(){this._hideShadow();this.$supers("setLeft",arguments);this._syncShadow()},updateDomStyle_:function(){this.$supers("updateDomStyle_",arguments);if(this.desktop){zWatch.fireDown("beforeSize",this);zWatch.fireDown("onSize",this)}},addToolbar:function(a,b){switch(a){case"tbar":this.tbar=b;break;case"bbar":this.bbar=b;break;case"fbar":this.fbar=b;break;default:return false}return this.appendChild(b)},onClose:function(){if(!this.inServer||!this.isListen("onClose",{asapOnly:1})){this.parent.removeChild(this)}},onMove:function(a){this._left=a.left;this._top=a.top},onSize:_zkf=(function(){function a(h){if(!h._lastSize){return}var e=h.$n(),f=h.isFloatable(),g=f?jq(e).offsetParent():jq(e).parent(),d=e.style;var b=zk.ie6_&&g[0].clientWidth==0?g[0].offsetWidth-g.zk.borderWidth():g[0].clientWidth;if(!f){b-=g.zk.paddingWidth();b=g.zk.revisedWidth(b)}d.width=jq.px(b);if(h.isOpen()){var c=zk.ie6_&&g[0].clientHeight==0?g[0].offsetHeight-g.zk.borderHeight():g[0].clientHeight;if(!f){c-=g.zk.paddingHeight();c=g.zk.revisedHeight(c)}d.height=jq.px(c)}}return function(b){this._hideShadow();if(this.isMaximized()){if(!this.__maximized){a(this)}this.__maximized=false}this._fixWdh();if(this.tbar){b.fireDown(this.tbar)}if(this.bbar){b.fireDown(this.bbar)}if(this.fbar){b.fireDown(this.fbar)}this._fixHgh();this._syncShadow()}})(),onShow:_zkf,onHide:function(){this._hideShadow()},_fixWdh:zk.ie7?function(){if(!this.isFramable()||!this.panelchildren){return}var f=jq(this.$n()),d=f[0].style.width,j=f.find("> :first-child")[0],a=this.$n("cap")?jq(j).next()[0]:null,b=f.find("> :last-child")[0],e=this.$n("bb"),i=this.$n("fb")?jq(b).prev()[0]:null,c=this.panelchildren.$n(),h=c.parentNode;if(!d||d=="auto"){var g=zk(h.parentNode).padBorderWidth()+zk(h.parentNode.parentNode).padBorderWidth();if(j){j.firstChild.style.width=jq.px(h.offsetWidth+g)}if(a){a.firstChild.firstChild.style.width=jq.px(h.offsetWidth-(zk(a).padBorderWidth()+zk(a.firstChild).padBorderWidth()-g))}if(e){e.style.width=zk(e).revisedWidth(c.offsetWidth)}if(i){i.firstChild.firstChild.style.width=jq.px(h.offsetWidth-(zk(i).padBorderWidth()+zk(i.firstChild).padBorderWidth()-g))}if(b){b.firstChild.style.width=jq.px(h.offsetWidth+g)}}else{if(j){j.firstChild.style.width=""}if(a){a.firstChild.style.width=""}if(e){e.style.width=""}if(i){i.firstChild.style.width=""}if(b){b.firstChild.style.width=""}}}:zk.$void,_fixHgh:function(){if(!this.panelchildren||!this.isRealVisible()){return}var c=this.$n(),a=this.panelchildren.$n(),b=c.style.height;if(zk.ie6_&&((b&&b!="auto")||a.style.height)){a.style.height="0"}if(b&&b!="auto"){zk(a).setOffsetHeight(this._offsetHeight(c))}if(zk.ie6_){zk(a).redoCSS()}},_offsetHeight:function(i){var c=i.offsetHeight-this._titleHeight(i);if(this.isFramable()){var a=this.panelchildren.$n(),g=jq(this.$n("body")).find(":last")[0],f=this.$n("cap");c-=g.offsetHeight;if(a){c-=zk(a.parentNode).padBorderHeight()}if(f){c-=zk(f.parentNode).padBorderHeight()}}c-=zk(i).padBorderHeight();var b=this.$n("tb"),e=this.$n("bb"),d=this.$n("fb");if(b){c-=b.offsetHeight}if(e){c-=e.offsetHeight}if(d){c-=d.offsetHeight}return c},_titleHeight:function(d){var b=this.isFramable(),a=b?jq(d).find("> div:first-child").next()[0]:this.$n("cap"),c=b?jq(d).find("> div:first-child")[0].offsetHeight:0;return a?a.offsetHeight+c:c},onFloatUp:function(a){if(!this.isVisible()||!this.isFloatable()){return}for(var b=a.origin;b;b=b.parent){if(b==this){this.setTopmost();return}if(b.isFloating_()){return}}},getZclass:function(){return this._zclass==null?"z-panel":this._zclass},_afterSlideDown:function(a){zWatch.fireDown("onShow",this)},_beforeSlideUp:function(a){zWatch.fireDown("onHide",this)},_initFloat:function(){var b=this.$n();if(!b.style.top&&!b.style.left){var a=zk(b).revisedOffset();b.style.left=jq.px(a[0],true);b.style.top=jq.px(a[1],true)}b.style.position="absolute";if(this.isMovable()){this._initMove()}this._syncShadow();if(this.isRealVisible()){zk(b).cleanVisibility();this.setTopmost()}},_initMove:function(b){var c=this.$n("cap");if(c&&!this._drag){c.style.cursor="move";var a=this.$class;this._drag=new zk.Draggable(this,null,{handle:c,stackup:true,starteffect:a._startmove,ignoredrag:a._ignoremove,endeffect:a._aftermove})}},_syncShadow:function(){if(!this.isFloatable()){if(this._shadow){this._shadow.destroy();this._shadow=null}}else{var a=this.$n("body");if(a&&zk(a).isRealVisible()){if(!this._shadow){this._shadow=new zk.eff.Shadow(this.$n(),{left:-4,right:4,top:-2,bottom:3,stackup:(zk.useStackup===undefined?zk.ie6_:zk.useStackup)})}if(this.isMaximized()||this.isMinimized()){this._hideShadow()}else{this._shadow.sync()}}}},_hideShadow:function(){var a=this._shadow;if(a){a.hide()}},bind_:function(f,e,d){this.$supers("bind_",arguments);zWatch.listen({onSize:this,onShow:this,onHide:this});var c=this.uuid,b=this.$class;if(this.isFloatable()){zWatch.listen({onFloatUp:this});this.setFloating_(true);this._initFloat()}if(this.isMaximizable()&&this.isMaximized()){var a=this;d.push(function(){a._maximized=false;a.setMaximized(true,true)})}},unbind_:function(){zWatch.unlisten({onSize:this,onShow:this,onHide:this,onFloatUp:this});this.setFloating_(false);if(this._shadow){this._shadow.destroy();this._shadow=null}if(this._drag){this._drag.destroy();this._drag=null}this.$supers("unbind_",arguments)},doClick_:function(b){switch(b.domTarget){case this.$n("close"):this.fire("onClose");break;case this.$n("max"):this.setMaximized(!this.isMaximized());break;case this.$n("min"):this.setMinimized(!this.isMinimized());break;case this.$n("exp"):var a=this.$n("body"),c=a?zk(a).isVisible():this.isOpen();if(!c==this.isOpen()){this._open=c}this.setOpen(!c);break;default:this.$supers("doClick_",arguments);return}b.stop()},doMouseOver_:function(a){switch(a.domTarget){case this.$n("close"):jq(this.$n("close")).addClass(this.getZclass()+"-close-over");break;case this.$n("max"):var c=this.getZclass(),b=this.isMaximized()?" "+c+"-maxd-over":"";jq(this.$n("max")).addClass(c+"-max-over"+b);break;case this.$n("min"):jq(this.$n("min")).addClass(this.getZclass()+"-min-over");break;case this.$n("exp"):jq(this.$n("exp")).addClass(this.getZclass()+"-exp-over");break}this.$supers("doMouseOver_",arguments)},doMouseOut_:function(a){switch(a.domTarget){case this.$n("close"):jq(this.$n("close")).removeClass(this.getZclass()+"-close-over");break;case this.$n("max"):var c=this.getZclass(),b=jq(this.$n("max"));if(this.isMaximized()){b.removeClass(c+"-maxd-over")}b.removeClass(c+"-max-over");break;case this.$n("min"):jq(this.$n("min")).removeClass(this.getZclass()+"-min-over");break;case this.$n("exp"):jq(this.$n("exp")).removeClass(this.getZclass()+"-exp-over");break}this.$supers("doMouseOut_",arguments)},domClass_:function(d){var b=this.$supers("domClass_",arguments);if(!d||!d.zclass){var c=this.getZclass();var a="normal"==this.getBorder()?"":c+"-noborder";if(a){b+=(b?" ":"")+a}a=this.isOpen()?"":c+"-colpsd";if(a){b+=(b?" ":"")+a}}return b},onChildAdded_:function(a){this.$supers("onChildAdded_",arguments);if(a.$instanceof(zul.wgt.Caption)){this.caption=a}else{if(a.$instanceof(zul.wnd.Panelchildren)){this.panelchildren=a}else{if(a.$instanceof(zul.wgt.Toolbar)){if(this.firstChild==a||(this.nChildren==(this.caption?2:1))){this.tbar=a}else{if(this.lastChild==a&&a.previousSibling.$instanceof(zul.wgt.Toolbar)){this.fbar=a}else{if(a.previousSibling.$instanceof(zul.wnd.Panelchildren)){this.bbar=a}}}}}}this.rerender()},onChildRemoved_:function(a){this.$supers("onChildRemoved_",arguments);if(a==this.caption){this.caption=null}else{if(a==this.panelchildren){this.panelchildren=null}else{if(a==this.tbar){this.tbar=null}else{if(a==this.bbar){this.bbar=null}else{if(a==this.fbar){this.fbar=null}}}}}this.rerender()}},{_startmove:function(b){b.control._hideShadow();var a=b.node;if(a.style.top&&a.style.top.indexOf("%")>=0){a.style.top=a.offsetTop+"px"}if(a.style.left&&a.style.left.indexOf("%")>=0){a.style.left=a.offsetLeft+"px"}},_ignoremove:function(b,d,a){var c=b.control;switch(a.domTarget){case c.$n("close"):case c.$n("max"):case c.$n("min"):case c.$n("exp"):return true}return false},_aftermove:function(c,a){var d=c.control;d._syncShadow();var b=d.$n();d.fire("onMove",zk.copy({left:b.style.left,top:b.style.top},a.data),{ignorable:true})}});
zkreg('zul.wnd.Panel');zk._m={};
zk._m['default']=function(c,i){var b=this.getZclass(),a=this.uuid,d=this.getTitle(),h=this.caption,g=this.isFramable(),e=this.getBorder()!="normal",f=!h&&!d;c.push("<div",this.domAttrs_(),">");if(h||d){if(g){c.push('<div class="',b,'-tl"><div class="',b,'-tr"></div></div>');c.push('<div class="',b,'-hl"><div class="',b,'-hr"><div class="',b,'-hm">')}c.push('<div id="',a,'-cap" class="',b,"-header ");if(!g&&e){c.push(b,"-header-noborder")}c.push('">');if(!h){if(this.isClosable()){c.push('<div id="',a,'-close" class="',b,"-icon ",b,'-close"></div>')}if(this.isMaximizable()){c.push('<div id="',a,'-max" class="',b,"-icon ",b,"-max");if(this.isMaximized()){c.push(" ",b,"-maxd")}c.push('"></div>')}if(this.isMinimizable()){c.push('<div id="',a,'-min" class="',b,"-icon ",b,'-min"></div>')}if(this.isCollapsible()){c.push('<div id="',a,'-exp" class="',b,"-icon ",b,'-exp"></div>')}c.push(zUtl.encodeXML(d))}else{h.redraw(c)}c.push("</div>");if(g){c.push("</div></div></div>")}}else{if(g){c.push('<div class="',b,'-tl"><div class="',b,'-tr"></div></div>')}}c.push('<div id="',a,'-body" class="',b,'-body"');if(!this.isOpen()){c.push(' style="display:none;"')}c.push(">");if(g){c.push('<div class="',b,'-cl"><div class="',b,'-cr"><div class="',b,"-cm");if(f){c.push(" ",b,"-noheader")}c.push('">')}if(this.tbar){c.push('<div id="',a,'-tb" class="',b,"-top");if(e){c.push(" ",b,"-top-noborder")}if(f){c.push(" ",b,"-noheader")}c.push('">');this.tbar.redraw(c);c.push("</div>")}if(this.panelchildren){this.panelchildren.redraw(c)}if(this.bbar){c.push('<div id="',a,'-bb" class="',b,"-btm");if(e){c.push(" ",b,"-btm-noborder")}if(f){c.push(" ",b,"-noheader")}c.push('">');this.bbar.redraw(c);c.push("</div>")}if(g){c.push('</div></div></div><div class="',b,"-fl");if(!this.fbar){c.push(" ",b,"-nobtm2")}c.push('"><div class="',b,'-fr"><div class="',b,'-fm">')}if(this.fbar){c.push('<div id="',a,'-fb" class="',b,'-btm2">');this.fbar.redraw(c);c.push("</div>")}if(g){c.push('</div></div></div><div class="',b,'-bl"><div class="',b,'-br"></div></div>')}c.push("</div></div>")};
;zkmld(zk._p.Panel,zk._m);zul.wnd.Panelchildren=zk.$extends(zul.Widget,{setHeight:zk.$void,setWidth:zk.$void,getZclass:function(){return this._zclass==null?"z-panel-children":this._zclass},domClass_:function(d){var b=this.$supers("domClass_",arguments);if(!d||!d.zclass){var c=this.getZclass();var a=!this.parent.getTitle()&&!this.parent.caption?c+"-noheader":"";if(a){b+=(b?" ":"")+a}a=this.parent.getBorder()=="normal"?"":c+"-noborder";if(a){b+=(b?" ":"")+a}}return b},updateDomStyle_:function(){this.$supers("updateDomStyle_",arguments);if(this.desktop){zWatch.fireDown("beforeSize",this.parent);zWatch.fireDown("onSize",this.parent)}}});
zkreg('zul.wnd.Panelchildren',true);zk._m={};
zk._m['default']=function(b){b.push("<div",this.domAttrs_(),">");for(var a=this.firstChild;a;a=a.nextSibling){a.redraw(b)}b.push("</div>")};
;zkmld(zk._p.Panelchildren,zk._m);
}finally{zk.setLoaded(zk._n);}});zk.setLoaded('zul.wnd',1);