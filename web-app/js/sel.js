zk.load('zul.mesh',function(){zk._n='zul.sel';try{zk._p=zk.$package(zk._n,false,true);
zul.sel.SelectWidget=zk.$extends(zul.mesh.MeshWidget,{_rows:0,$init:function(){this.$supers("$init",arguments);this._selItems=[]},$define:{rows:function(a){var b=this.$n();if(b){b._lastsz=null;this.onSize()}},checkmark:function(a){if(this.desktop){this.rerender()}},multiple:function(a){if(!this._multiple&&this._selItems.length){var c=this.getSelectedItem();for(var b;(b=this._selItems.pop());){if(b!=c){if(!this._checkmark){b._setSelectedDirectly(false)}else{b._selected=false}}}this._selItems.push(c);this._chgSel=c.uuid}if(this._checkmark&&this.desktop){this.rerender()}},chgSel:function(g){var a={};for(var d=0;;){var c=g.indexOf(",",d),f=(c>=0?g.substring(d,c):g.substring(d)).trim();if(f){a[f]=true}if(c<0){break}d=c+1}for(var e=this.getBodyWidgetIterator(),b;(b=e.next());){this._changeSelect(b,a[b.uuid]==true)}},selectedIndex:null},setSelectedItem:function(a){a=zk.Widget.$(a);if(this._selectedItem!=a){this._selectedItem=a;if(a){this._selectOne(a,false);zk(a).scrollIntoView(this.ebody)}}},getSelectedItem:function(){return this._selItems[0]},getSelectedItems:function(){return this._selItems.$clone()},setHeight:function(a){if(this._height!=a){this._height=a;var b=this.$n();if(b){b.style.height=a||"";this.onSize()}}},onSize:function(){if(this.isRealVisible()){var a=this.$n();if(a._lastsz&&a._lastsz.height==a.offsetHeight&&a._lastsz.width==a.offsetWidth){this.fireOnRender(155);return}this._calcSize();this.fireOnRender(155);this._shallSize=false}},_calcSize:function(){this._calcHgh();var c=this.$n(),a=c.style.width;if(!a||a=="auto"||a.indexOf("%")>=0){a=zk(c).revisedWidth(c.offsetWidth);if(a<0){a=0}if(a){a+="px"}}if(a){this.ebody.style.width=a;if(this.ehead){this.ehead.style.width=a}if(this.efoot){this.efoot.style.width=a}}var b=this.ebody.clientWidth;if(zk.ie){if(this.eheadtbl&&this.eheadtbl.offsetWidth!=this.ebodytbl.offsetWidth){this.ebodytbl.style.width=""}if(b&&this.ebody.offsetWidth==this.ebodytbl.offsetWidth&&this.ebody.offsetWidth-b>11){if(--b<0){b=0}this.ebodytbl.style.width=b+"px"}}if(this.ehead){if(b){this.ehead.style.width=b+"px"}if(this.isSizedByContent()&&this.ebodyrows&&this.ebodyrows.length){this.$class._adjHeadWd(this)}}else{if(this.efoot){if(b){this.efoot.style.width=b+"px"}if(this.efoottbl.rows.length&&this.ebodyrows&&this.ebodyrows.length){this.$class.cpCellWidth(this)}}}c._lastsz={height:c.offsetHeight,width:c.offsetWidth}},_calcHgh:function(){var g=this.ebodyrows,u=this.$n(),f=u.style.height,s=f&&f!="auto"&&f.indexOf("%")<0;if(s){f=zk.parseInt(f);if(f){f-=this._headHgh(0);if(f<20){f=20}var o=0;l_out:for(var z,y=0,k=g.length;y<k;++o,++y){var p;for(;;++y){if(y>=k){break l_out}p=g[y];if(zk(p).isVisible()){break}}var A=zk(p);z=A.offsetTop()+A.offsetHeight();if(z>=f){if(z>f+2){++o}break}}o=Math.ceil(o&&z?(f*o)/z:f/this._headHgh(20));this._visibleRows(o);f-=(this.efoot?this.efoot.offsetHeight:0);this.ebody.style.height=(f<0?0:f)+"px";if(zk.ie&&this.ebody.offsetHeight){}return}}var c=0,m=this.getRows(),v,b,a;for(var y=0,k=g.length;y<k;++y){var p=g[y];if(zk(p).isVisible()){++c;if(!b){b=p}if(m===c){a=p;break}v=p}}f=0;var l=2;if(!m){if(this.isVflex()){f=this._vflexSize(u.style.height);if(zk.ie&&this._cachehgh!=f){f-=1;this._cachehgh=f}if(f<25){f=25}var q=zk(b).offsetHeight();if(!q){q=this._headHgh(20)}m=Math.round((f-l)/q);if(m<3){m=3;f=q*3+l}}this._visibleRows(m)}if(m){if(!f){if(!c){f=this._headHgh(20)*m}else{if(m<=c){var t=zk(a);f=t.offsetTop()+t.offsetHeight()}else{var x=zk(v);f=x.offsetTop()+x.offsetHeight();f=Math.ceil((m*f)/c)}}if(zk.ie){f+=l}}this.ebody.style.height=f+"px";if(zk.ie&&this.ebody.offsetHeight){}var z=u.style.height;if(!z||z=="auto"){if(zk.ie&&!zk.ie8&&this.ebodytbl){var e=this.ebody.offsetWidth,d=this.ebody.clientWidth,i=e-d;if(d&&i>11){if(e==this.ebodytbl.offsetWidth){this.ebodytbl.style.width=jq.px(zk(this.ebodytbl).revisedWidth(this.ebodytbl.offsetWidth-i))}}}z=this.ebody.offsetHeight-this.ebody.clientHeight;if(this.ebody.clientHeight&&z>11){this.ebody.style.height=f+jq.scrollbarWidth()+"px"}}}else{f=u.style.height;if(zk.ie&&(!f||f=="auto")&&this.ebody.offsetWidth-this.ebody.clientWidth>11){if(!c){this.ebody.style.height=""}else{this.ebody.style.height=(this.ebody.offsetHeight*2-this.ebody.clientHeight)+"px"}}else{this.ebody.style.height=""}if(!f||f=="auto"){f=this.ebody.offsetHeight-this.ebody.clientHeight;if(this.ebody.clientHeight&&f>11){this.ebody.style.height=this.ebody.offsetHeight+jq.scrollbarWidth()+"px"}}}},_visibleRows:function(a){if("number"==typeof a){this._visiRows=a}else{return this.getRows()||this._visiRows||0}},_headHgh:function(d){var b=this.ehead?this.ehead.offsetHeight:0;if(this.paging){var c=this.$n("pgit"),a=this.$n("pgib");if(c){b+=c.offsetHeight}if(a){b+=a.offsetHeight}}return b?b:d},indexOfItem:function(d){if(d.getMeshWidget()==this){for(var b=0,c=this.getBodyWidgetIterator(),a;(a=c.next());b++){if(a==d){return b}}}return -1},toggleItemSelection:function(a){if(a.isSelected()){this._removeItemFromSelection(a)}else{this._addItemToSelection(a)}},selectItem:function(a){if(!a){this.setSelectedIndex(-1)}else{if(this._multiple||!a.isSelected()){this.setSelectedIndex(this.indexOfItem(a))}}},_addItemToSelection:function(b){if(!b.isSelected()){if(!this._multiple){this.selectItem(b)}else{var a=this.indexOfItem(b);if(a<this._selectedIndex||this._selectedIndex<0){this._selectedIndex=a}b._selected=true}this._selItems.push(b)}},_removeItemFromSelection:function(a){if(a.isSelected()){if(!this._multiple){this.clearSelection()}else{a._selected=false;this._selItems.$remove(a)}}},clearSelection:function(){if(this._selItems.length){for(var a;(a=this._selItems.pop());){a._selected=false}this._selectedIndex=-1}},focus:function(d){var b;if(this.isVisible()&&this.canActivate({checkOnly:true})&&(b=this.$n("a"))){if(this._focusItem){for(var c=this.getBodyWidgetIterator(),a;(a=c.next());){if(this._isFocus(a)){a.focus();break}}}zk(b).focus(d);return true}return false},bind_:function(){this.$supers("bind_",arguments);var a=this.$n("a");if(a){this.domListen_(a,"onFocus","doFocus_").domListen_(a,"onKeyDown").domListen_(a,"onBlur","doBlur_")}},unbind_:function(){var a=this.$n("a");if(a){this.domUnlisten_(a,"onFocus","doFocus_").domUnlisten_(a,"onKeyDown").domUnlisten_(a,"onBlur","doBlur_")}this.$supers("unbind_",arguments)},doBlur_:function(a){if(this._focusItem){this._lastSelectedItem=this._focusItem;this._focusItem._doFocusOut()}this._focusItem=null;this.$supers("doBlur_",arguments)},_doClick:function(b){if(zk.dragging||this._shallIgnoreEvent(b)){return}var g=b.domTarget,a=g.tagName,c=zk.Widget.$(g);if((a!="TR"&&g.onclick)||a=="A"||(c!=h&&(c.isListen("onDoubleClick")||c.isListen("onClick")))){return}var h=b.target,f=g==h.$n("cm");if(f){if(this.isMultiple()){this._toggleSelect(h,g.checked,b)}else{this._select(h,b)}}else{if((zk.gecko||zk.safari)&&h.isListen("onDoubleClick")){var d=zUtl.now(),e=h._last;h._last=d;if(e&&d-e<900){return}}this._syncFocus(h);if(this.isMultiple()){if(b.data.shiftKey){this._selectUpto(h,b)}else{if(b.data.ctrlKey){this._toggleSelect(h,!h.isSelected(),b)}else{this._select(h,b)}}}else{this._select(h,b)}h.focus()}},doKeyDown_:function(b){if(!this._shallIgnoreEvent(b)){switch(b.data.keyCode){case 33:case 34:case 38:case 40:case 37:case 39:case 32:case 36:case 35:if(b.domTarget.tagName!="A"){this.focus()}b.stop();return false}}var a=b.domTarget.tagName;if(!zk.gecko3||(a!="INPUT"&&a!="TEXTAREA")){zk(this.$n()).disableSelection()}b.target=this._focusItem||this.getSelectedItem()||this;this.$supers("doKeyDown_",arguments)},doKeyUp_:function(a){zk(this.$n()).enableSelection();a.stop({propagation:true});this.$supers("doKeyUp_",arguments)},_doKeyDown:function(h){if(zAu.processing()||this._shallIgnoreEvent(h)){return true}var j=this._focusItem||this.getSelectedItem();if(!j){return true}var f=h.data,c=f.shiftKey,b=f.ctrlKey;if(c&&!this.isMultiple()){c=false}var g=false,d,i;switch(f.keyCode){case 33:case 34:d=this._visibleRows();if(d==0){d=20}if(f.keyCode==33){d=-d}break;case 38:case 40:d=f.keyCode==40?1:-1;break;case 32:if(this.isMultiple()){this._toggleSelect(j,!j.isSelected(),h)}else{this._select(j,h)}break;case 36:case 35:d=f.keyCode==35?1:-1;g=true;break;case 37:this._doLeft(j);break;case 39:this._doRight(j);break}if(d){if(c){this._toggleSelect(j,true,h)}var e=j.$n();for(;e&&(e=d>0?e.nextSibling:e.previousSibling);){var a=zk.Widget.$(e);if(a.$instanceof(zul.sel.Treerow)){a=a.parent}if(!a.isDisabled()){if(c){this._toggleSelect(a,true,h)}if(zk(e).isVisible()){if(!c){i=a}if(!g){if(d>0){--d}else{++d}if(d==0){break}}}}}}if(i){if(b){this._focus(i)}else{this._select(i,h)}this._syncFocus(i);zk(i).scrollIntoView(this.ebody)}switch(f.keyCode){case 33:case 34:case 38:case 40:case 37:case 39:case 32:case 36:case 35:h.stop();return false}return true},_doLeft:zk.$void,_doRight:zk.$void,_shallIgnoreEvent:function(b){var a=b.domTarget.tagName;return !b.domTarget||!b.target.canActivate()||((a=="INPUT"&&!b.domTarget.id.endsWith("-cm"))||a=="TEXTAREA"||(a=="BUTTON"&&!b.domTarget.id.endsWith("-a"))||a=="SELECT"||a=="OPTION"||(zk.isLoaded("zul.wgt")&&b.target.$instanceof(zul.wgt.Button)))},_syncFocus:function(c){var a=this.$n("a"),d=c.$n(),b=zk(d).revisedOffset();b=this._toStyleOffset(a,b[0]+this.ebody.scrollLeft,b[1]);a.style.top=b[1]+"px";a.style.left=b[0]+"px"},_toStyleOffset:function(e,b,f){var a=zk(e).revisedOffset(),c=zk.parseInt(e.style.left),d=zk.parseInt(e.style.top);return[b-a[0]+c,f-a[1]+d]},_select:function(b,a){if(this._selectOne(b,true)){this.fireOnSelect(b,a)}},_selectUpto:function(f,b){if(f.isSelected()){this._focus(f);return}var e=false,d=false;for(var c=this.getBodyWidgetIterator(),a;(a=c.next());){if(a.isDisabled()){continue}if(e){this._changeSelect(a,true);if(a==f){break}}else{if(d){this._changeSelect(a,true);if(this._isFocus(a)||a==this._lastSelectedItem){break}}else{d=a==f;e=this._isFocus(a)||a==this._lastSelectedItem;if(d||e){this._changeSelect(a,true);if(d&&e){break}}}}}this._focus(f);this.fireOnSelect(f,b)},setSelectAll:_zkf=function(c,b){for(var d=this.getBodyWidgetIterator(),a;(a=d.next());){if(!a.isDisabled()){this._changeSelect(a,true)}}if(c){this.fireOnSelect(this.getSelectedItem(),b)}},selectAll:_zkf,_selectOne:function(d,a){var b=this.getSelectedItem();if(this.isMultiple()){if(d&&a){this._unsetFocusExcept(d)}var c=this._unsetSelectAllExcept(d);if(!c&&d&&b==d){if(a){this._setFocus(d,true)}return false}}else{if(b){if(b==d){if(a){this._setFocus(d,true)}return false}this._changeSelect(b,false);if(d){if(a){this._setFocus(b,false)}}}if(d&&a){this._unsetFocusExcept(d)}}if(d){this._changeSelect(d,true);if(a){this._setFocus(d,true)}}return true},_toggleSelect:function(d,c,b){if(!this.isMultiple()){var a=this.getSelectedItem();if(d!=a&&c){this._changeSelect(d,false)}}this._changeSelect(d,c);this._focus(d);this.fireOnSelect(d,b)},fireOnSelect:function(b,c){var f=[];for(var e=this.getSelectedItems(),a=e.length;--a>=0;){if(e[a].isSelected()){f.push(e[a].uuid)}}var g=c.data,d;if(this._multiple){d=g.ctrlKey||g.shiftKey||(c.domTarget.id?c.domTarget.id.endsWith("-cm"):false)}this.fire("onSelect",zk.copy({items:f,reference:b,clearFirst:!d},g))},_focus:function(a){if(this.canActivate({checkOnly:true})){this._unsetFocusExcept(a);this._setFocus(a,true)}},_changeSelect:function(c,a){var b=c.isSelected()!=a;if(b){c.setSelected(a);c._toggleEffect(true)}return b},_isFocus:function(a){return this._focusItem==a},_setFocus:function(c,a){var b=this._isFocus(c)!=a;if(b){if(a){if(!c.focus()){this.focus()}if(!this.paging&&zk.gecko){this.fireOnRender(5)}}}if(!a){c._doFocusOut()}return b},_unsetSelectAllExcept:function(d){var c=false;for(var b=this.getSelectedItems(),a=b.length;--a>=0;){if(b[a]!=d&&this._changeSelect(b[a],false)){c=true}}return c},_unsetFocusExcept:function(a){if(this._focusItem&&this._focusItem!=a){this._setFocus(this._focusItem,false)}else{this._focusItem=null}}});
zul.sel.ItemWidget=zk.$extends(zul.Widget,{_checkable:true,$define:{checkable:function(){if(this.desktop){this.rerender()}},disabled:function(){if(this.desktop){this.rerender()}},value:null},setSelected:function(a){if(this._selected!=a){var b=this.getMeshWidget();if(b){b.toggleItemSelection(this)}this._setSelectedDirectly(a)}},_setSelectedDirectly:function(b){var c=this.$n();if(c){jq(c)[b?"addClass":"removeClass"](this.getZclass()+"-seld");var a=this.$n("cm");if(a){a.checked=b;this._checkClick()}}this._selected=b},getLabel:function(){return this.firstChild?this.firstChild.getLabel():null},isSelected:function(){return this._selected},isStripeable_:function(){return true},getMeshWidget:function(){return this.parent},_getVisibleChild:function(c){for(var b=0,a=c.cells.length;b<a;b++){if(zk(c.cells[b]).isVisible()){return c.cells[b]}}return c},setVisible:function(b){if(this.isVisible()!=b){this.$supers("setVisible",arguments);if(this.isStripeable_()){var a=this.getMeshWidget();if(a){a.stripe()}}}},domClass_:function(d){var b=this.$supers("domClass_",arguments);if(!d||!d.zclass){var c=this.getZclass(),a=this.isDisabled()?c+"-disd":this.isSelected()?c+"-seld":"";if(a){b+=(b?" ":"")+a}}return b},_toggleEffect:function(a){var d=this.$n(),c=this.getZclass();if(a){jq(d).removeClass(c+"-over-seld").removeClass(c+"-over")}else{var b=jq(d);b.addClass(b.hasClass(c+"-seld")?c+"-over-seld":c+"-over")}},focus:function(b){this.getMeshWidget()._focusItem=this;if(this.isVisible()&&this.canActivate({checkOnly:true})){var a=this.$n("cm");if(a){zk(a).focus(b);return true}else{this._doFocusIn()}}return false},bind_:function(){this.$supers("bind_",arguments);var a=this.$n("cm");if(a){this.domListen_(a,"onFocus").domListen_(a,"onBlur","_doFocusOut")}},unbind_:function(){var a=this.$n("cm");if(a){this.domUnlisten_(a,"onFocus").domUnlisten_(a,"onBlur","_doFocusOut")}this.$supers("unbind_",arguments)},_doFocusIn:function(){var a=this.$n();if(a){jq(this._getVisibleChild(a)).addClass(this.getZclass()+"-focus")}},_doFocusOut:function(){var b=this.$n();if(b){var a=this.getZclass();jq(b).removeClass(a+"-focus");jq(b.cells).removeClass(a+"-focus")}},_doFocus:function(a){if(this.canActivate({checkOnly:true})){this.doFocus_(a);this._doFocusIn()}},_checkAll:function(){var e=this.getMeshWidget();if(!e||!e._headercm){return}var a=this.$n("cm");if(a&&!a.checked){e._headercm.checked=false;return}var d;for(var c=e.getBodyWidgetIterator(),b;(b=c.next());){if(!b.isDisabled()){if(!(d=(b.$n("cm")||{}).checked)){break}}}if(d){e._headercm.checked=true}},_checkClick:function(a){if(this.getMeshWidget().isMultiple()){this._checkAll()}else{var d=this.$n("cm");for(var b=jq.$$(d.name),c=b.length;c--;){b[c].defaultChecked=false}d.defaultChecked=d.checked}},doClick_:function(a){if(this.isDisabled()){return}a.target=this;this.getMeshWidget()._doClick(a);a.stop({propagation:true});this.$supers("doClick_",arguments)},doRightClick_:function(a){if(this.isDisabled()){return}a.target=this;this.getMeshWidget()._doClick(a);this.$supers("doRightClick_",arguments)},doMouseOver_:function(a){if(this.isDisabled()){return}this._toggleEffect();a.stop();this.$supers("doMouseOver_",arguments)},doMouseOut_:function(a){if(this.isDisabled()||(zk.ie&&jq.isAncestor(this.$n(),a.domEvent.relatedTarget||a.domEvent.toElement))){return}this._toggleEffect(true);a.stop({propagation:true});this.$supers("doMouseOut_",arguments)},doKeyDown_:function(b){var a=b.domTarget.tagName,c=this.getMeshWidget();if(!zk.gecko3||(a!="INPUT"&&a!="TEXTAREA")){zk(c.$n()).disableSelection()}c._doKeyDown(b);b.stop({propagation:true});this.$supers("doKeyDown_",arguments)},doKeyUp_:function(a){zk(this.getMeshWidget().$n()).enableSelection();a.stop({propagation:true});this.$supers("doKeyUp_",arguments)}});
zul.sel.Listbox=zk.$extends(zul.sel.SelectWidget,{$init:function(){this.$supers("$init",arguments);this._groupsInfo=[]},getGroupCount:function(){return this._groupsInfo.length},getGroups:function(){return this._groupsInfo.$clone()},hasGroup:function(){return this._groupsInfo.length},nextItem:function(a){if(a){while((a=a.nextSibling)&&!a.$instanceof(zul.sel.Listitem)){}}return a},previousItem:function(a){if(a){while((a=a.previousSibling)&&!a.$instanceof(zul.sel.Listitem)){}}return a},getOddRowSclass:function(){return this._scOddRow==null?this.getZclass()+"-odd":this._scOddRow},setOddRowSclass:function(a){if(!a){a=null}if(this._scOddRow!=a){this._scOddRow=a;var b=this.$n();if(b&&this.rows){this.stripe()}}return this},bind_:function(){this.$supers("bind_",arguments);zWatch.listen({onResponse:this});zk.afterMount(this.proxy(this.onResponse))},unbind_:function(){zWatch.unlisten({onResponse:this});this.$supers("unbind_",arguments)},onResponse:function(){if(this.desktop&&this._shallStripe){this.stripe();if(this._shallSize){this.$supers("onResponse",arguments)}}},_syncStripe:function(){this._shallStripe=true;if(!this.inServer&&this.desktop){this.onResponse()}},stripe:function(){var a=this.getOddRowSclass();if(!a){return}for(var c=0,e=true,d=this.getBodyWidgetIterator(),b;(b=d.next());c++){if(b.isVisible()&&b.isStripeable_()){jq(b.$n())[e?"removeClass":"addClass"](a);e=!e}}this._shallStripe=false;return this},rerender:function(){this.$supers("rerender",arguments);this._syncStripe();return this},getCaveNode:function(){var a=this.$n("cave");return a.lastChild||a},insertChildHTML_:function(g,d,f){var e,c;if(d){if(!g.$instanceof(zul.sel.Listitem)||d.$instanceof(zul.sel.Listitem)){e=d._getBeforeNode();if(!e){d=null}}else{d=null}}if(!d){for(var b=this;;){c=b.getCaveNode();if(c){break}var a=b.nextSibling;if(a){e=a._getBeforeNode();if(e){break}}if(!(b=b.parent)){c=document.body;break}}}if(e){jq(e).before(g._redrawHTML())}else{jq(c).append(g._redrawHTML())}g.bind(f)},getZclass:function(){return this._zclass==null?"z-listbox":this._zclass},onChildAdded_:function(a){this.$supers("onChildAdded_",arguments);if(a.$instanceof(zul.sel.Listitem)){if(a.$instanceof(zul.sel.Listgroup)){this._groupsInfo.push(a)}if(!this.firstItem||!this.previousItem(a)){this.firstItem=a}if(!this.lastItem||!this.nextItem(a)){this.lastItem=a}if(a.isSelected()&&!this._selItems.$contains(a)){this._selItems.push(a)}}else{if(a.$instanceof(zul.sel.Listhead)){this.listhead=a}else{if(a.$instanceof(zul.mesh.Paging)){this.paging=a}else{if(a.$instanceof(zul.sel.Listfoot)){this.listfoot=a}else{if(a.$instanceof(zul.mesh.Frozen)){this.frozen=a}}}}}this._syncStripe();this._syncSize()},onChildRemoved_:function(c){this.$supers("onChildRemoved_",arguments);if(c==this.listhead){this.listhead=null}else{if(c==this.paging){this.paging=null}else{if(c==this.frozen){this.frozen=null}else{if(c==this.listfoot){this.listfoot=null}else{if(!c.$instanceof(zul.mesh.Auxhead)){if(c==this.firstItem){for(var a=this.firstChild,b=zul.sel.Listitem;a&&!a.$instanceof(b);a=a.nextSibling){}this.firstItem=a}if(c==this.lastItem){for(var a=this.lastChild,b=zul.sel.Listitem;a&&!a.$instanceof(b);a=a.previousSibling){}this.lastItem=a}if(c.$instanceof(zul.sel.Listgroup)){this._groupsInfo.$remove(c)}if(c.isSelected()){this._selItems.$remove(c)}}}}}}this._syncStripe();this._syncSize()},getHeadWidgetClass:function(){return zul.sel.Listhead},itemIterator:_zkf=function(){return new zul.sel.ItemIter(this)},getBodyWidgetIterator:_zkf});zul.sel.ItemIter=zk.$extends(zk.Object,{$init:function(a){this.box=a},_init:function(){if(!this._isInit){this._isInit=true;this.p=this.box.firstItem}},hasNext:function(){this._init();return this.p},next:function(){this._init();var a=this.p;if(a){this.p=a.parent.nextItem(a)}return a}});
zkreg('zul.sel.Listbox');zk._m={};
zk._m['paging']=function(h){var b=this.uuid,e=this.getZclass(),k=this.getInnerWidth(),l=k=="100%"?' width="100%"':"",c=k!="100%"?"width:"+k:"",a=this.inPagingMold(),d,o=zk.ie||zk.gecko?"a":"button";h.push("<div",this.domAttrs_(),">");if(a&&this.paging){d=this.getPagingPosition();if(d=="top"||d=="both"){h.push('<div id="',b,'-pgit" class="',e,'-pgi-t">');this.paging.redraw(h);h.push("</div>")}}if(this.listhead){h.push('<div id="',b,'-head" class="',e,'-header">',"<table",l,zUtl.cellps0,' style="table-layout:fixed;',c,'">');this.domFaker_(h,"-hdfaker",e);for(var m=this.heads,g=0,i=m.length;g<i;){m[g++].redraw(h)}h.push("</table></div>")}h.push('<div id="',b,'-body" class="',e,'-body"');var f=this.getHeight();if(f){h.push(' style="overflow:hidden;height:',f,'"')}else{if(this.getRows()>1){h.push(' style="overflow:hidden;height:"',this.getRows()*15,'px"')}}h.push("><table",l,zUtl.cellps0,' id="',b,'-cave"');if(!this.isSizedByContent()){h.push(' style="table-layout:fixed;',c,'"')}h.push(">");if(this.listhead){this.domFaker_(h,"-bdfaker",e)}for(var n=this.firstItem;n;n=this.nextItem(n)){n.redraw(h)}h.push("</table><",o,' id="',b,'-a" tabindex="-1" onclick="return false;" href="javascript:;" class="z-focus-a"></',o,">");h.push("</div>");if(this.listfoot){h.push('<div id="',b,'-foot" class="',e,'-footer">',"<table",l,zUtl.cellps0,' style="table-layout:fixed;',c,'">');if(this.listhead){this.domFaker_(h,"-ftfaker",e)}this.listfoot.redraw(h);h.push("</table></div>")}if(this.frozen){h.push('<div id="',b,'-frozen" class="',e,'-frozen">');this.frozen.redraw(h);h.push("</div>")}if(d=="bottom"||d=="both"){h.push('<div id="',b,'-pgib" class="',e,'-pgi-b">');this.paging.redraw(h);h.push("</div>")}h.push("</div>")};
;zk._m['default']=[zk._p.Listbox,'paging'];zkmld(zk._p.Listbox,zk._m);zul.sel.Listitem=zk.$extends(zul.sel.ItemWidget,{getListbox:zul.sel.ItemWidget.prototype.getMeshWidget,getListgroup:function(){if(this.parent&&this.parent.hasGroup()){for(var a=this.previousSibling;a;a=a.previousSibling){if(a.$instanceof(zul.sel.Listgroup)){return a}}}return null},setLabel:function(a){this._autoFirstCell().setLabel(a)},setImage:function(a){this._autoFirstCell().setImage(a)},_autoFirstCell:function(){if(!this.firstChild){this.appendChild(new zul.sel.Listcell())}return this.firstChild},getZclass:function(){return this._zclass==null?"z-listitem":this._zclass},domStyle_:function(c){if((this.$instanceof(zul.sel.Listgroup)||this.$instanceof(zul.sel.Listgroupfoot))||(c&&c.visible)){return this.$supers("domStyle_",arguments)}var a=this.$supers("domStyle_",arguments),b=this.getListgroup();return b&&!b.isOpen()?a+"display:none;":a}});
zkreg('zul.sel.Listitem');zk._m={};
zk._m['default']=function(b){b.push("<tr",this.domAttrs_(),">");for(var a=this.firstChild;a;a=a.nextSibling){a.redraw(b)}b.push("</tr>")};
;zkmld(zk._p.Listitem,zk._m);zul.sel.Listcell=zk.$extends(zul.LabelImageWidget,{_colspan:1,$define:{colspan:[function(a){return a>1?a:1},function(){var a=this.$n();if(a){a.colSpan=this._colspan}}]},setLabel:function(){this.$supers("setLabel",arguments);if(this.desktop&&this.parent.$instanceof(zul.sel.Listgroup)){this.parent.rerender()}},getListbox:function(){var a=this.parent;return a?a.parent:null},getZclass:function(){return this._zclass==null?"z-listcell":this._zclass},getTextNode:function(){return jq(this.$n()).find(">div:first")[0]},getMaxlength:function(){var b=this.getListbox();if(!b){return 0}if(b.getMold()=="select"){return b.getMaxlength()}var a=this.getListheader();return a?a.getMaxlength():0},getListheader:function(){var b=this.getListbox();if(b&&b.listhead){var a=this.getChildIndex();if(a<b.listhead.nChildren){return b.listhead.getChildAt(a)}}return null},domLabel_:function(){return zUtl.encodeXML(this.getLabel(),{maxlength:this.getMaxlength()})},domContent_:function(){var b=this.$supers("domContent_",arguments),a=this._colHtmlPre();return b?a?a+"&nbsp;"+b:b:a},domClass_:function(c){var a=this.$supers("domClass_",arguments);if((!c||!c.zclass)&&(this.parent.$instanceof(zul.sel.Listgroup)||this.parent.$instanceof(zul.sel.Listgroupfoot))){var b=this.parent.getZclass();a+=" "+b+"-inner"}return a},_colHtmlPre:function(){var a="",c=this.getListbox();if(c!=null&&this.parent.firstChild==this){if(this.parent.$instanceof(zul.sel.Listgroup)){var e=this.parent.getZclass();a='<span id="'+this.parent.uuid+'-img" class="'+e+"-img "+e+"-img-"+(this.parent._open?"open":"close")+'"></span>'}if(c.isCheckmark()){var b=this.parent,d=b.isCheckable();a+='<input type="'+(c.isMultiple()?"checkbox":"radio")+'" id="'+b.uuid+'-cm"';if(!d||b.isDisabled()){a+=' disabled="disabled"'}if(b.isSelected()){a+=' checked="checked"'}if(!c.isMultiple()){a+=' name="'+c.uuid+'"'}if(!d){a+=' style="visibility:hidden"'}a+="/>"}if(a){return a}}return(!this.getImage()&&!this.getLabel()&&!this.firstChild)?"&nbsp;":""},doMouseOver_:function(b){if(zk.gecko&&(this._draggable||this.parent._draggable)){var a=b.domTarget.tagName;if(a!="INPUT"&&a!="TEXTAREA"){var c=this.$n();if(c){c.firstChild.style.MozUserSelect="none"}}}this.$supers("doMouseOver_",arguments)},doMouseOut_:function(a){if(zk.gecko&&(this._draggable||this.parent._draggable)){var b=this.$n();if(b){b.firstChild.style.MozUserSelect="none"}}this.$supers("doMouseOut_",arguments)},domAttrs_:function(){var a=this.getListheader(),b;if(a){b=a.getColAttrs()}return this.$supers("domAttrs_",arguments)+(this._colspan>1?' colspan="'+this._colspan+'"':"")+(b?" "+b:"")}});
zkreg('zul.sel.Listcell',true);zk._m={};
zk._m['default']=function(b){b.push("<td",this.domAttrs_(),'><div id="',this.uuid,'-cave" class="',this.getZclass()+"-cnt");var c=this.getListbox();if(c!=null&&!c.isSizedByContent()){b.push(" z-overflow-hidden")}b.push('"',this.domTextStyleAttr_(),">",this.domContent_());for(var a=this.firstChild;a;a=a.nextSibling){a.redraw(b)}b.push("</div></td>")};
;zkmld(zk._p.Listcell,zk._m);zul.sel.Listhead=zk.$extends(zul.mesh.HeadWidget,{getZclass:function(){return this._zclass==null?"z-listhead":this._zclass}});
zkreg('zul.sel.Listhead');zk._m={};
zk._m['default']=zul.mesh.HeadWidget.redraw;
;zkmld(zk._p.Listhead,zk._m);zul.sel.Listheader=zk.$extends(zul.mesh.SortWidget,{getListbox:zul.mesh.HeaderWidget.prototype.getMeshWidget,getMeshBody:zul.mesh.HeaderWidget.prototype.getMeshWidget,$define:{maxlength:[function(a){return !a||a<0?0:a},function(){if(this.desktop){this.updateCells_()}}]},updateCells_:function(){var d=this.getListbox();if(d==null||d.getMold()=="select"){return}var b=this.getChildIndex();for(var c=this.getBodyWidgetIterator(),a;(a=c.next());){if(b<a.nChildren){return a.getChildAt(b).rerender()}}},getZclass:function(){return this._zclass==null?"z-listheader":this._zclass},bind_:function(){this.$supers("bind_",arguments);var a=this.$n("cm");if(a){this.getListbox()._headercm=a;this.domListen_(a,"onClick")}},unbind_:function(){this.$supers("unbind_",arguments);var a=this.$n("cm");if(a){this.getListbox()._headercm=null;this.domUnlisten_(a,"onClick")}},_doClick:function(a){var b=this.getListbox();if(a.domTarget.checked){b.selectAll(true,a)}else{b._select(null,a)}},domContent_:function(){var a=this.$supers("domContent_",arguments),b=this.getListbox();if(b!=null&&this.parent.firstChild==this&&b.isCheckmark()&&b.isMultiple()){a='<input type="checkbox" id="'+this.uuid+'-cm"/>'+(a?"&nbsp;"+a:"")}return a}});
zkreg('zul.sel.Listheader',true);zk._m={};
zk._m['default']=zul.mesh.HeaderWidget.redraw;
;zkmld(zk._p.Listheader,zk._m);zul.sel.Listfoot=zk.$extends(zul.Widget,{getListbox:function(){return this.parent},getZclass:function(){return this._zclass==null?"z-listfoot":this._zclass}});
zkreg('zul.sel.Listfoot');zk._m={};
zk._m['default']=function(b){b.push("<tr",this.domAttrs_(),">");for(var a=this.firstChild;a;a=a.nextSibling){a.redraw(b)}b.push("</tr>")};
;zkmld(zk._p.Listfoot,zk._m);zul.sel.Listfooter=zk.$extends(zul.LabelImageWidget,{_span:1,$define:{span:function(a){var b=this.$n();if(b){b.colSpan=a}}},getListbox:function(){return this.parent?this.parent.parent:null},getListheader:function(){var a=this.getListbox();if(a){var b=a.listhead;if(b){return b.getChildAt(this.getChildIndex())}}return null},getZclass:function(){return this._zclass==null?"z-listfooter":this._zclass}});
zkreg('zul.sel.Listfooter',true);zk._m={};
zk._m['default']=function(b){b.push("<td",this.domAttrs_(),'><div id="',this.uuid,'-cave" class="',this.getZclass(),'">',this.domContent_());for(var a=this.firstChild;a;a=a.nextSibling){a.redraw(b)}b.push("</div></td>")};
;zkmld(zk._p.Listfooter,zk._m);zul.sel.Listgroup=zk.$extends(zul.sel.Listitem,{_open:true,$define:{open:function(a){this._openItem(a,true);if(a){this.getListbox().stripe()}}},getItems:function(){var b=[];for(var a=this.nextSibling;a&&!a.$instanceof(zul.sel.Listgroup);a=a.nextSibling){b.push(a)}return b},getItemCount:function(){return this.getItems().length},getZclass:function(){return this._zclass!=null?this._zclass:"z-listgroup"},getLabel:function(){return this.firstChild!=null?this.firstChild.getLabel():null},domContent_:function(){var b=this.getLabel(),a=this.domImage_();return b?a+" ":a},isStripeable_:function(){return false},_doImgClick:function(b){var c=!this.isOpen(),a=this.getListbox();this._openItem(c);if(c||a.getModel()){if(c){this.parent.stripe()}if(!a.paging){a.onSize()}}b.stop()},_openItem:function(e,d){this._open=e;var c=this.$n("img"),f=this.getZclass();if(c){jq(c)[e?"removeClass":"addClass"](f+"-img-close")[e?"addClass":"removeClass"](f+"-img-open")}var b=this.getListbox(),a=b?b.inPagingMold():false;if(!a){this._openItemNow(e)}if(!d){this.fire("onOpen",{open:e},{toServer:a})}},_openItemNow:function(b){var a=this.$n();if(a){for(var c,a=a.nextSibling;a&&(c=zk.Widget.$(a))&&!zul.sel.Listgroup.isInstance(c)&&!zul.sel.Listgroupfoot.isInstance(c);a=a.nextSibling){if(c.desktop&&c.isVisible()){jq(a)[b?"show":"hide"]()}}}},beforeParentChanged_:function(e){if(e==null){var d=this.getListbox(),b=d.hasGroup();if(b){for(var a=d.getGroups(),f=d.getGroupCount();--f>=0;){if(a[f]==this){b=a[--f];break}}}if(b){this._unbindafter=[function(){if(b){b._openItem(b.isOpen(),true)}}]}else{this._openItemNow(true,true)}}},onChildAdded_:function(a){this.$supers("onChildAdded_",arguments);if(this.firstChild==a){this.rerender()}},bind_:function(){this.$supers("bind_",arguments);var g=this.$n(),a=this.$n("img");if(a){this.domListen_(a,"onClick","_doImgClick")}var e=g.parentNode.parentNode;if(e.tBodies.length>1){var d=0;for(var f=e.rows[0],c=f.cells.length;c--;){if(zk(f.cells[c]).isVisible()){d++}}for(var b=g.cells,c=b.length;c--;){d-=b[c].colSpan}if(d>0&&g.cells.length){g.cells[g.cells.length-1].colSpan+=d}}},unbind_:function(b,a){this.domUnlisten_(this.$n("img"),"onClick","_doImgClick");if(this._unbindafter&&this._unbindafter.length){a.push(this._unbindafter.pop())}this._unbindafter=null;this.$supers("unbind_",arguments)}});
zkreg('zul.sel.Listgroup');zul.sel.Listgroupfoot=zk.$extends(zul.sel.Listitem,{getZclass:function(){return this._zclass!=null?this._zclass:"z-listgroupfoot"},isStripeable_:function(){return false}});
zkreg('zul.sel.Listgroupfoot');zul.sel.Option=zk.$extends(zul.Widget,{$define:{disabled:function(a){var b=this.$n();if(b){b.disabled=a?"disabled":""}},value:null},setVisible:function(a){if(this._visible!=a){this._visible=a;if(this.desktop){this.parent.rerender()}}},setSelected:function(a){if(this._selected!=a){if(this.parent){this.parent.toggleItemSelection(this)}var b=this.$n();if(b){b.selected=a?"selected":""}this._selected=a}},isSelected:function(){return this._selected},getLabel:function(){return this.firstChild?this.firstChild.getLabel():null},getMaxlength:function(){return this.parent?this.parent.getMaxlength():0},domLabel_:function(){return zUtl.encodeXML(this.getLabel(),{maxlength:this.getMaxlength()})},domAttrs_:function(){return this.$supers("domAttrs_",arguments)+(this.isDisabled()?' disabled="disabled"':"")+(this.isSelected()?' selected="selected"':"")}});
zkreg('zul.sel.Option');zk._m={};
zk._m['select']=function(a){a.push("<option",this.domAttrs_(),">",this.domLabel_(),"</option>")};
;zkmld(zk._p.Option,zk._m);zul.sel.Select=zk.$extends(zul.Widget,{_selectedIndex:-1,_tabindex:-1,_rows:0,$init:function(){this.$supers("$init",arguments);this._selItems=[]},$define:{multiple:function(a){var b=this.$n();if(b){b.multiple=a?"multiple":""}},disabled:function(a){var b=this.$n();if(b){b.disabled=a?"disabled":""}},selectedIndex:function(a){var b=this.$n();if(b){b.selectedIndex=a}},tabindex:function(a){var b=this.$n();if(b){b.tabindex=a>=0?a:""}},name:function(a){var b=this.$n();if(b){b.name=a}},rows:function(a){var b=this.$n();if(b){b.size=a}},maxlength:function(a){if(this.desktop){this.rerender()}}},toggleItemSelection:function(a){if(a.isSelected()){this._removeItemFromSelection(a)}else{this._addItemToSelection(a)}},selectItem:function(a){if(!a){this.setSelectedIndex(-1)}else{if(this._multiple||!a.isSelected()){this.setSelectedIndex(a.getChildIndex())}}},_addItemToSelection:function(b){if(!b.isSelected()){if(!this._multiple){this.selectItem(b)}else{var a=b.getChildIndex();if(a<this._selectedIndex||this._selectedIndex<0){this._selectedIndex=a}b._selected=true;this._selItems.push(b)}}},_removeItemFromSelection:function(a){if(a.isSelected()){if(!this._multiple){this.clearSelection()}else{a._selected=false;this._selItems.$remove(a)}}},clearSelection:function(){if(this._selItems.length){var a;for(;(a=this._selItems.pop());){a._selected=false}this._selectedIndex=-1}},domAttrs_:function(){return this.$supers("domAttrs_",arguments)+(this.isDisabled()?' disabled="disabled"':"")+(this.isMultiple()?' multiple="multiple"':"")+(this.getSelectedIndex()>-1?" selectedIndex="+this.getSelectedIndex():"")+(this.getTabindex()>-1?" tabindex="+this.getTabindex():"")+(this.getRows()>0?" size="+this.getRows():"")+(this.getName()?' name="'+this.getName()+'"':"")},bind_:function(){this.$supers("bind_",arguments);var a=this.$n();this.domListen_(a,"onChange").domListen_(a,"onFocus","doFocus_").domListen_(a,"onBlur","doBlur_")},unbind_:function(){var a=this.$n();this.domUnlisten_(a,"onChange").domUnlisten_(a,"onFocus","doFocus_").domUnlisten_(a,"onBlur","doBlur_").$supers("unbind_",arguments)},_doChange:function(i){var g=[],e,d=this.$n();if(this.isMultiple()){var a=d.options;for(var f=0,h=a.length;f<h;++f){var b=a[f],c=zk.Widget.$(b.id);if(c){c.setSelected(b.selected)}if(b.selected){g.push(b.id);if(!e){e=b.id}}}}else{var b=d.options[d.selectedIndex];this.setSelectedIndex(d.selectedIndex);g.push(b.id);e=b.id}this.fire("onSelect",{items:g,reference:e})},doKeyUp_:function(a){if(zk.gecko||zk.safari){if(this.isMultiple()||this.getSelectedIndex()===a.domTarget.selectedIndex){return}this._doChange(a)}else{this.$supers("doKeyUp_",arguments)}},onChildAdded_:_zkf=function(){this.rerender()},onChildRemoved_:_zkf});
zkreg('zul.sel.Select');zk._m={};
zk._m['select']=function(b){b.push("<select",this.domAttrs_(),">");for(var a=this.firstChild;a;a=a.nextSibling){if(a.isVisible()){a.redraw(b)}}b.push("</select>")};
;zkmld(zk._p.Select,zk._m);zul.sel.Tree=zk.$extends(zul.sel.SelectWidget,{nextItem:function(a){if(a){while((a=a.nextSibling)&&!a.$instanceof(zul.sel.Listitem)){}}return a},previousItem:function(a){if(a){while((a=a.previousSibling)&&!a.$instanceof(zul.sel.Listitem)){}}return a},clear:function(){if(!this._treechildren||!this._treechildren.nChildren){return}for(var a=this._treechildren.firstChild;a;a=a.nextSibling){a.detach()}},getZclass:function(){return this._zclass==null?"z-tree":this._zclass},onChildAdded_:function(a){this.$supers("onChildAdded_",arguments);if(a.$instanceof(zul.sel.Treecols)){this.treecols=a}else{if(a.$instanceof(zul.sel.Treefoot)){this.treefoot=a}else{if(a.$instanceof(zul.sel.Treechildren)){this.treechildren=a;this._fixSelectedSet()}else{if(a.$instanceof(zul.mesh.Paging)){this.paging=a}}}}this._syncSize()},onChildRemoved_:function(a){this.$supers("onChildRemoved_",arguments);if(a==this.treecols){this.treecols=null}else{if(a==this.treefoot){this.treefoot=null}else{if(a==this.treechildren){this.treechildren=null;_selItems.clear();_sel=null}else{if(a==this.paging){this.paging=null}}}}this._syncSize()},_onTreeitemAdded:function(a){this._fixNewChild(a);this._onTreechildrenAdded(a.treechildren)},_onTreeitemRemoved:function(a){var b;if(a.isSelected()){this._selItems.$remove(a);b=this._sel==a;if(b&&!this._multiple){this._sel=null}}this._onTreechildrenRemoved(a.treechildren);if(b){this._fixSelected()}},_onTreechildrenAdded:function(d){if(!d||d.parent==this){return}for(var c=0,b=d.getItems(),a=b.length;c<a;++c){if(b[c]){this._fixNewChild(b[c])}}},_onTreechildrenRemoved:function(f){if(f==null||f.parent==this){return}var d,e;for(var c=0,b=f.getItems(),a=b.length;c<a;++c){d=b[c];if(d.isSelected()){this._selItems.$remove(d);if(this._sel==d){if(!this._multiple){this._sel=null;return}e=true}}}if(e){this._fixSelected()}},_fixNewChild:function(a){if(a.isSelected()){if(this._sel&&!this._multiple){a._selected=false;a.rerender()}else{if(!this._sel){this._sel=a}this._selItems.push(a)}}},_fixSelectedSet:function(){this._sel=null;this._selItems=[];for(var c=0,b=this.getItems(),a=b.length;c<a;++c){if(b[c].isSelected()){if(_sel==null){_sel=b[c]}else{if(!_multiple){b[c]._selected=false;continue}}this._selItems.push(item)}}},_fixSelected:function(){var d;switch(this._selItems.length){case 1:d=this._selItems[0];case 0:break;default:for(var c=0,b=this.getItems(),a=b.length;c<a;++c){if(b[c].isSelected()){d=b[c];break}}}if(d!=this._sel){this._sel=d;return true}return false},getHeadWidgetClass:function(){return zul.sel.Treecols},itemIterator:_zkf=function(){return new zul.sel.TreeItemIter(this)},getBodyWidgetIterator:_zkf,getItems:function(){return this.treechildren?this.treechildren.getItems():[]},getItemCount:function(){return this.treechildren!=null?this.treechildren.getItemCount():0},_doLeft:function(a){if(a.isOpen()){a.setOpen(false)}},_doRight:function(a){if(!a.isOpen()){a.setOpen(true)}}});zul.sel.TreeItemIter=zk.$extends(zk.Object,{$init:function(a){this.tree=a},_init:function(){if(!this._isInit){this._isInit=true;this.items=this.tree.getItems();this.length=this.items.length;this.cur=0}},hasNext:function(){this._init();return this.cur<this.length},next:function(){this._init();return this.items[this.cur++]}});
zkreg('zul.sel.Tree');zk._m={};
zk._m['paging']=function(h){var b=this.uuid,e=this.getZclass(),k=this.getInnerWidth(),f=k=="100%"?' width="100%"':"",c=k!="100%"?"width:"+k:"",a=this.inPagingMold(),d,m=zk.ie||zk.gecko?"a":"button";h.push("<div",this.domAttrs_(),">");if(a&&this.paging){d=this.getPagingPosition();if(d=="top"||d=="both"){h.push('<div id="',b,'-pgit" class="',e,'-pgi-t">');this.paging.redraw(h);h.push("</div>")}}if(this.treecols){h.push('<div id="',b,'-head" class="',e,'-header">',"<table",f,zUtl.cellps0,' style="table-layout:fixed;',c,'">');this.domFaker_(h,"-hdfaker",e);for(var l=this.heads,g=0,i=l.length;g<i;){l[g++].redraw(h)}h.push("</table></div>")}h.push('<div id="',b,'-body" class="',e,'-body"><table',f,zUtl.cellps0);if(!this.isSizedByContent()){h.push(' style="table-layout:fixed;',c,'"')}h.push(">");if(this.treecols){this.domFaker_(h,"-bdfaker",e)}if(this.treechildren){this.treechildren.redraw(h)}h.push("</table><",m,' id="',b,'-a" tabindex="-1" onclick="return false;" href="javascript:;" class="z-focus-a"></',m,">");h.push("</div>");if(this.treefoot){h.push('<div id="',b,'-foot" class="',e,'-footer">',"<table",f,zUtl.cellps0,' style="table-layout:fixed;',c,'">');if(this.treecols){this.domFaker_(h,"-ftfaker",e)}this.treefoot.redraw(h);h.push("</table></div>")}if(d=="bottom"||d=="both"){h.push('<div id="',b,'-pgib" class="',e,'-pgi-b">');this.paging.redraw(h);h.push("</div>")}h.push("</div>")};
;zk._m['default']=[zk._p.Tree,'paging'];zkmld(zk._p.Tree,zk._m);zul.sel.Treecol=zk.$extends(zul.mesh.HeaderWidget,{getTree:zul.mesh.HeaderWidget.prototype.getMeshWidget,$define:{maxlength:[function(a){return !a||a<0?0:a},function(){if(this.desktop){this.updateCells_()}}]},updateCells_:function(){var a=this.getTree();if(a){zul.sel.Treecol.updateCell(a.treechildren,jcol)}},getZclass:function(){return this._zclass==null?"z-treecol":this._zclass}},{updateCell:function(b,c){if(!b){return}for(var a=b.firstChild;a;a=a.nextSibling){if(a.treerow){if(c<a.treerow.nChildren){a.treerow.getChildAt(c).rerender()}}zul.sel.Treecol.updateCell(a.treechildren,c)}}});
zkreg('zul.sel.Treecol',true);zk._m={};
zk._m['default']=function(b){var c=this.getZclass();b.push("<th",this.domAttrs_(),'><div id="',this.uuid,'-cave" class="',c,'-cnt">',this.domContent_());for(var a=this.firstChild;a;a=a.nextSibling){a.redraw(b)}b.push("</div></th>")};
;zkmld(zk._p.Treecol,zk._m);zul.sel.Treecols=zk.$extends(zul.mesh.HeadWidget,{getTree:function(){return this.parent},setVisible:function(a){if(this._visible!=a){this.$supers("setVisible",arguments);this.getTree().rerender()}},getZclass:function(){return this._zclass==null?"z-treecols":this._zclass}});
zkreg('zul.sel.Treecols');zk._m={};
zk._m['default']=function(b){b.push("<tr",this.domAttrs_(),' align="left">');for(var a=this.firstChild;a;a=a.nextSibling){a.redraw(b)}b.push("</tr>")};
;zkmld(zk._p.Treecols,zk._m);zul.sel.Treechildren=zk.$extends(zul.Widget,{getTree:function(){for(var a=this.parent;a;a=a.parent){if(a.$instanceof(zul.sel.Tree)){return a}}return null},getLinkedTreerow:function(){return this.parent&&this.parent.$instanceof(zul.sel.Treeitem)?this.parent.treerow:null},rerender:function(){if(this.desktop){for(var a=this.firstChild;a;a=a.nextSibling){a.rerender()}}return this},insertChildHTML_:function(e,b,d){var c,a;if(b){c=b._getBeforeNode();if(!c){b=null}}else{a=this.getCaveNode()||this.parent.getCaveNode()}if(c){jq(c).before(e._redrawHTML())}else{jq(a).after(e._redrawHTML())}e.bind(d)},getCaveNode:function(){for(var b,a=this.lastChild;a;a=a.previousSibling){if((b=a.getCaveNode())){return b}}},isVisible:function(){if(!this.$supers("isVisible",arguments)){return false}if(!this.parent){return false}if(!(this.parent.$instanceof(zul.sel.Treeitem))){return true}if(!this.parent.isOpen()){return false}return !(this.parent.parent.$instanceof(zul.sel.Treechildren))||this.parent.parent.isVisible()},getItems:function(b){b=b||[];for(var a=this.firstChild;a;a=a.nextSibling){b.push(a);if(a.treechildren){a.treechildren.getItems(b)}}return b},getItemCount:function(){var b=0;for(var a=this.firstChild;a;a=a.nextSibling,++b){if(a.treechildren){b+=a.treechildren.getItemCount()}}return b},getZclass:function(){return this._zclass==null?"z-treechildren":this._zclass},beforeParentChanged_:function(c){var b=this.getTree();if(b){b._onTreechildrenRemoved(this)}if(c){var a=c.$instanceof(zul.sel.Tree)?c:c.getTree();if(a){a._onTreechildrenAdded(this)}}}});
zkreg('zul.sel.Treechildren');zk._m={};
zk._m['default']=function(b){if(this.parent.$instanceof(zul.sel.Tree)){b.push("<tbody",this.domAttrs_(),">");for(var a=this.firstChild;a;a=a.nextSibling){a.redraw(b)}b.push("</tbody>")}else{for(var a=this.firstChild;a;a=a.nextSibling){a.redraw(b)}}};
;zkmld(zk._p.Treechildren,zk._m);zul.sel.Treeitem=zk.$extends(zul.sel.ItemWidget,{_open:true,_checkable:true,$define:{open:function(d,c){var b=this.$n("open");if(!b){return}var f=b.className;b.className=d?f.replace("-close","-open"):f.replace("-open","-close");this._showKids(d);this.getMeshWidget().onSize();if(!c){var a=this.getTree(),e=a.inPagingMold()||a.isModel();this.fire("onOpen",{open:d},{toServer:e})}}},rerender:function(){if(this.desktop){if(this.treerow){this.treerow.rerender()}if(this.treechildren){this.treechildren.rerender()}}return this},_showKids:function(b){if(this.treechildren){for(var a=this.treechildren.firstChild;a;a=a.nextSibling){a.$n().style.display=b?"":"none";if(a.isOpen()){a._showKids(b)}}}},isStripeable_:function(){return false},getMeshWidget:_zkf=function(){for(var a=this.parent;a;a=a.parent){if(a.$instanceof(zul.sel.Tree)){return a}}return null},getNode:function(){if(this.treerow){return this.treerow.$n()}return null},getZclass:function(){if(this.treerow){return this.treerow.getZclass()}return null},$n:function(a){if(this.treerow){return this.treerow.$n(a)}return null},getTree:_zkf,isContainer:function(){return this.treechildren!=null},isEmpty:function(){return !this.treechildren||!this.treechildren.nChildren},getLevel:function(){var b=0;for(var a=this;;++b){if(!a.parent){break}a=a.parent.parent;if(!a||a.$instanceof(zul.sel.Tree)){break}}return b},getLabel:function(){var a=this.getFirstCell();return a?a.getLabel():null},setLabel:function(a){this._autoFirstCell().setLabel(a)},getFirstCell:function(){return this.treerow?this.treerow.firstChild:null},_autoFirstCell:function(){if(!this.treerow){this.appendChild(new zul.sel.Treerow())}var a=this.treerow.getFirstChild();if(!a){a=new zul.sel.Treecell();this.treerow.appendChild(a)}return a},getImage:function(){var a=this.getFirstCell();return a?a.getImage():null},setImage:function(a){this._autoFirstCell().setImage(a);return this},getParentItem:function(){var a=this.parent&&this.parent.parent?this.parent.parent:null;return a&&a.$instanceof(zul.sel.Treeitem)?a:null},setVisible:function(a){if(this._visible!=a){this.$supers("setVisible",arguments);if(this.treerow){this.treerow.setVisible(a)}}return this},beforeParentChanged_:function(c){var b=this.getTree();if(b){b._onTreeitemRemoved(this)}if(c){var a=c.getTree();if(a){a._onTreeitemAdded(this)}}},onChildAdded_:function(a){this.$supers("onChildAdded_",arguments);if(a.$instanceof(zul.sel.Treerow)){this.treerow=a}else{if(a.$instanceof(zul.sel.Treechildren)){this.treechildren=a;if(this.treerow){this.rerender()}}}},onChildRemoved_:function(a){this.$supers("onChildRemoved_",arguments);if(a==this.treerow){this.treerow=null}else{if(a==this.treechildren){this.treechildren=null;this.rerender()}}},doClick_:function(a){if(this.isDisabled()){return}if(a.domTarget==this.$n("open")){this.setOpen(!this._open);a.stop()}else{this.$supers("doClick_",arguments)}}});
zkreg('zul.sel.Treeitem');zk._m={};
zk._m['default']=function(a){if(this.treerow){this.treerow.redraw(a)}if(this.treechildren){this.treechildren.redraw(a)}};
;zkmld(zk._p.Treeitem,zk._m);zul.sel.Treerow=zk.$extends(zul.Widget,{setContext:zk.$void,setPopup:zk.$void,setTooltip:zk.$void,setTooltiptext:zk.$void,getTree:function(){return this.parent?this.parent.getTree():null},getLevel:function(){return this.parent?this.parent.getLevel():0},getLinkedTreechildren:function(){return this.parent?this.parent.treechildren:null},domClass_:function(c){var b=this.$supers("domClass_",arguments);if(!c||!c.zclass){var a=this.parent?this.parent.isDisabled()?this.getZclass()+"-disd":this.parent.isSelected()?this.getZclass()+"-seld":"":"";if(a){b+=(b?" ":"")+a}}return b},getZclass:function(){return this._zclass==null?"z-treerow":this._zclass},getContext:function(){return this.parent?this.parent.getContext():null},getPopup:function(){return this.parent?this.parent.getPopup():null},getTooltip:function(){return this.parent?this.parent.getTooltip():null},getTooltiptext:function(){return this.parent?this.parent.getTooltiptext():null},isVisible:function(){if(!this.parent||!this.$supers("isVisible",arguments)){return false}if(!this.parent.isVisible()){return false}var a=this.parent.parent;return a&&a.isVisible()}});
zkreg('zul.sel.Treerow');zk._m={};
zk._m['default']=function(b){b.push("<tr",this.domAttrs_(),">");for(var a=this.firstChild;a;a=a.nextSibling){a.redraw(b)}b.push("</tr>")};
;zkmld(zk._p.Treerow,zk._m);zul.sel.Treecell=zk.$extends(zul.LabelImageWidget,{setWidth:zk.$void,_span:1,$define:{span:function(a){var b=this.$n();if(b){b.colSpan=a}}},getTree:function(){return this.parent?this.parent.getTree():null},domStyle_:function(c){var b=this.$supers("domStyle_",arguments),a=this.getTreecol();return this.isVisible()&&a&&!a.isVisible()?b+"display:none;":b},getTreecol:function(){var a=this.getTree();if(a&&a.treecols){var b=this.getChildIndex();if(b<a.treecols.nChildren){return a.treecols.getChildAt(b)}}return null},getLevel:function(){return this.parent?this.parent.getLevel():0},getMaxlength:function(){var b=this.getTree();if(!b){return 0}var a=this.getTreecol();return a?a.getMaxlength():0},domLabel_:function(){return zUtl.encodeXML(this.getLabel(),{maxlength:this.getMaxlength()})},getTextNode:function(){return zDom.firstChild(this.$n(),"DIV")},domContent_:function(){var b=this.$supers("domContent_",arguments),a=this._colHtmlPre();return b?a?a+"&nbsp;"+b:b:a},_colHtmlPre:function(){if(this.parent.firstChild==this){var g=this.parent.parent,a=g.getTree(),h=[];if(a){if(a.isCheckmark()){var e=g.isCheckable();h.push('<input type="',a.isMultiple()?"checkbox":"radio",'"');if(!e||g.isDisabled()){h.push(' disabled="disabled"')}if(g.isSelected()){h.push(' checked="checked"')}if(!a.isMultiple()){h.push(' name="',a.uuid,'"')}if(!e){h.push(' style="visibility:hidden;"/>')}else{h.push(' id="',this.parent.uuid,'-cm"/>')}}}var f=a?a.getZclass():"",c=this._getTreeitems(g,a);for(var d=0,b=c.length;d<b;++d){this._appendIcon(h,f,d==0||c[d]==this.parent.lastChild?zul.sel.Treecell.SPACER:zul.sel.Treecell.VBAR,false)}if(g.isContainer()){this._appendIcon(h,f,g.isOpen()?c.length==0?zul.sel.Treecell.ROOT_OPEN:g==this.parent.lastChild?zul.sel.Treecell.LAST_OPEN:zul.sel.Treecell.TEE_OPEN:c.length==0?zul.sel.Treecell.ROOT_CLOSE:g==this.parent.lastChild?zul.sel.Treecell.LAST_CLOSE:zul.sel.Treecell.TEE_CLOSE,true)}else{this._appendIcon(h,f,c.length==0?zul.sel.Treecell.FIRSTSPACER:g==this.parent.lastChild?zul.sel.Treecell.LAST:zul.sel.Treecell.TEE,false)}return h.join("")}else{return !this.getImage()&&!this.getLabel()&&!this.nChildren?"&nbsp;":null}},_getTreeitems:function(d,a){var b=[];for(;;){var c=d.parent;if(!c){break}d=c.parent;if(!d||d==a){break}b.unshift(d)}return b},getZclass:function(){return this._zclass==null?"z-treecell":this._zclass},_appendIcon:function(e,c,a,b){e.push('<span class="');if(a==zul.sel.Treecell.TEE||a==zul.sel.Treecell.LAST||a==zul.sel.Treecell.VBAR||a==zul.sel.Treecell.SPACER){e.push(c+"-line ",c,"-",a,'"')}else{e.push(c+"-ico ",c,"-",a,'"')}if(b){var d=this.parent.parent;if(d&&d.treerow){e.push(' id="',d.treerow.uuid,'-open"')}}e.push("></span>")},getWidth:function(){var a=this.getTreecol();return a?a.getWidth():null}},{ROOT_OPEN:"root-open",ROOT_CLOSE:"root-close",LAST_OPEN:"last-open",LAST_CLOSE:"last-close",TEE_OPEN:"tee-open",TEE_CLOSE:"tee-close",TEE:"tee",LAST:"last",VBAR:"vbar",SPACER:"spacer",FIRSTSPACER:"firstspacer"});
zkreg('zul.sel.Treecell',true);zk._m={};
zk._m['default']=function(c){c.push("<td",this.domAttrs_(),'><div id="',this.uuid,'-cave" class="',this.getZclass()+"-cnt");var a=this.getTree();if(a!=null&&!a.isSizedByContent()){c.push(" z-overflow-hidden")}c.push('"',this.domTextStyleAttr_(),">",this.domContent_());for(var b=this.firstChild;b;b=b.nextSibling){b.redraw(c)}c.push("</div></td>")};
;zkmld(zk._p.Treecell,zk._m);zul.sel.Treefoot=zk.$extends(zul.Widget,{getTree:function(){return this.parent},getZclass:function(){return this._zclass==null?"z-treefoot":this._zclass}});
zkreg('zul.sel.Treefoot');zk._m={};
zk._m['default']=function(b){b.push("<tr",this.domAttrs_(),">");for(var a=this.firstChild;a;a=a.nextSibling){a.redraw(b)}b.push("</tr>")};
;zkmld(zk._p.Treefoot,zk._m);zul.sel.Treefooter=zk.$extends(zul.LabelImageWidget,{_span:1,$define:{span:function(a){var b=this.$n();if(b){b.colSpan=a}}},getTree:function(){return this.parent?this.parent.parent:null},getTreecol:function(){var a=this.getTree();if(a){var b=a.treecols;if(b){return b.getChildAt(this.getChildIndex())}}return null},getZclass:function(){return this._zclass==null?"z-treefooter":this._zclass}});
zkreg('zul.sel.Treefooter',true);zk._m={};
zk._m['default']=function(b){b.push("<td",this.domAttrs_(),'><div id="',this.uuid,'-cave" class="',this.getZclass(),'">',this.domContent_());for(var a=this.firstChild;a;a=a.nextSibling){a.redraw(b)}b.push("</div></td>")};
;zkmld(zk._p.Treefooter,zk._m);
}finally{zk.setLoaded(zk._n);}});zk.setLoaded('zul.sel',1);